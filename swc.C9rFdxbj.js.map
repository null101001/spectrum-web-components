{"version":3,"file":"swc.DmPUU03D.js","sources":["../../../tools/shared/src/focus-visible.js","../../../tools/shared/src/focusable.js"],"sourcesContent":["\"use strict\";let i=!0;try{document.body.querySelector(\":focus-visible\")}catch(a){i=!1,import(\"focus-visible\")}export const FocusVisiblePolyfillMixin=a=>{var s,t;const n=l=>{if(l.shadowRoot==null||l.hasAttribute(\"data-js-focus-visible\"))return()=>{};if(self.applyFocusVisiblePolyfill)self.applyFocusVisiblePolyfill(l.shadowRoot),l.manageAutoFocus&&l.manageAutoFocus();else{const e=()=>{self.applyFocusVisiblePolyfill&&l.shadowRoot&&self.applyFocusVisiblePolyfill(l.shadowRoot),l.manageAutoFocus&&l.manageAutoFocus()};return self.addEventListener(\"focus-visible-polyfill-ready\",e,{once:!0}),()=>{self.removeEventListener(\"focus-visible-polyfill-ready\",e)}}return()=>{}},o=Symbol(\"endPolyfillCoordination\");class c extends(t=a,s=o,t){constructor(){super(...arguments);this[s]=null}connectedCallback(){super.connectedCallback&&super.connectedCallback(),i||requestAnimationFrame(()=>{this[o]==null&&(this[o]=n(this))})}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),i||requestAnimationFrame(()=>{this[o]!=null&&(this[o](),this[o]=null)})}}return c};\n//# sourceMappingURL=focus-visible.js.map\n","\"use strict\";var d=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var n=(s,a,e,t)=>{for(var i=t>1?void 0:t?b(a,e):a,o=s.length-1,r;o>=0;o--)(r=s[o])&&(i=(t?r(a,e,i):r(i))||i);return t&&i&&d(a,e,i),i};import{SpectrumElement as h}from\"@spectrum-web-components/base\";import{property as l}from\"@spectrum-web-components/base/src/decorators.js\";import{FocusVisiblePolyfillMixin as m}from\"./focus-visible.js\";function u(){return new Promise(s=>requestAnimationFrame(()=>s()))}export class Focusable extends m(h){constructor(){super(...arguments);this.disabled=!1;this.autofocus=!1;this._tabIndex=0;this.manipulatingTabindex=!1;this.autofocusReady=Promise.resolve()}get tabIndex(){if(this.focusElement===this){const t=this.hasAttribute(\"tabindex\")?Number(this.getAttribute(\"tabindex\")):NaN;return isNaN(t)?-1:t}const e=parseFloat(this.hasAttribute(\"tabindex\")&&this.getAttribute(\"tabindex\")||\"0\");return this.disabled||e<0?-1:this.focusElement?this._tabIndex:e}set tabIndex(e){var t;if(this.manipulatingTabindex){this.manipulatingTabindex=!1;return}if(this.focusElement===this){if(this.disabled)this._tabIndex=e;else if(e!==this._tabIndex){this._tabIndex=e;const i=\"\"+e;this.manipulatingTabindex=!0,this.setAttribute(\"tabindex\",i)}return}if(e===-1?this.addEventListener(\"pointerdown\",this.onPointerdownManagementOfTabIndex):(this.manipulatingTabindex=!0,this.removeEventListener(\"pointerdown\",this.onPointerdownManagementOfTabIndex)),e===-1||this.disabled){if(this.manipulatingTabindex=!0,this.setAttribute(\"tabindex\",\"-1\"),this.removeAttribute(\"focusable\"),this.selfManageFocusElement)return;e!==-1?(this._tabIndex=e,this.manageFocusElementTabindex(e)):(t=this.focusElement)==null||t.removeAttribute(\"tabindex\");return}this.setAttribute(\"focusable\",\"\"),this.hasAttribute(\"tabindex\")?this.removeAttribute(\"tabindex\"):this.manipulatingTabindex=!1,this._tabIndex=e,this.manageFocusElementTabindex(e)}onPointerdownManagementOfTabIndex(){this.tabIndex===-1&&setTimeout(()=>{this.tabIndex=0,this.focus({preventScroll:!0}),this.tabIndex=-1})}async manageFocusElementTabindex(e){this.focusElement||await this.updateComplete,e===null?this.focusElement.removeAttribute(\"tabindex\"):this.focusElement!==this&&(this.focusElement.tabIndex=e)}get focusElement(){throw new Error(\"Must implement focusElement getter!\")}get selfManageFocusElement(){return!1}focus(e){this.disabled||!this.focusElement||(this.focusElement!==this?this.focusElement.focus(e):HTMLElement.prototype.focus.apply(this,[e]))}blur(){const e=this.focusElement||this;e!==this?e.blur():HTMLElement.prototype.blur.apply(this)}click(){if(this.disabled)return;const e=this.focusElement||this;e!==this?e.click():HTMLElement.prototype.click.apply(this)}manageAutoFocus(){this.autofocus&&(this.dispatchEvent(new KeyboardEvent(\"keydown\",{code:\"Tab\"})),this.focusElement.focus())}firstUpdated(e){super.firstUpdated(e),(!this.hasAttribute(\"tabindex\")||this.getAttribute(\"tabindex\")!==\"-1\")&&this.setAttribute(\"focusable\",\"\")}update(e){e.has(\"disabled\")&&this.handleDisabledChanged(this.disabled,e.get(\"disabled\")),super.update(e)}updated(e){super.updated(e),e.has(\"disabled\")&&this.disabled&&this.blur()}async handleDisabledChanged(e,t){const i=()=>this.focusElement!==this&&typeof this.focusElement.disabled!=\"undefined\";e?(this.manipulatingTabindex=!0,this.setAttribute(\"tabindex\",\"-1\"),await this.updateComplete,i()?this.focusElement.disabled=!0:this.setAttribute(\"aria-disabled\",\"true\")):t&&(this.manipulatingTabindex=!0,this.focusElement===this?this.setAttribute(\"tabindex\",\"\"+this._tabIndex):this.removeAttribute(\"tabindex\"),await this.updateComplete,i()?this.focusElement.disabled=!1:this.removeAttribute(\"aria-disabled\"))}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.autofocusReady,e}connectedCallback(){super.connectedCallback(),this.autofocus&&(this.autofocusReady=new Promise(async e=>{await u(),await u(),e()}),this.updateComplete.then(()=>{this.manageAutoFocus()}))}}n([l({type:Boolean,reflect:!0})],Focusable.prototype,\"disabled\",2),n([l({type:Boolean})],Focusable.prototype,\"autofocus\",2),n([l({type:Number})],Focusable.prototype,\"tabIndex\",1);\n//# sourceMappingURL=focusable.js.map\n"],"names":["i","document","body","querySelector","a","import","then","n","f","FocusVisiblePolyfillMixin","s","t","o","Symbol","c","constructor","super","arguments","this","connectedCallback","requestAnimationFrame","l","shadowRoot","hasAttribute","self","applyFocusVisiblePolyfill","e","coordinationHandler","manageAutoFocus","addEventListener","once","removeEventListener","disconnectedCallback","u","Promise","Focusable","m","h","disabled","autofocus","_tabIndex","manipulatingTabindex","autofocusReady","resolve","tabIndex","focusElement","Number","getAttribute","NaN","isNaN","parseFloat","onPointerdownManagementOfTabIndex","setAttribute","removeAttribute","selfManageFocusElement","manageFocusElementTabindex","setTimeout","focus","preventScroll","updateComplete","Error","HTMLElement","prototype","apply","blur","click","dispatchEvent","KeyboardEvent","code","firstUpdated","update","has","handleDisabledChanged","get","updated","canSetDisabled","getUpdateComplete","async","type","Boolean","reflect"],"mappings":"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"}