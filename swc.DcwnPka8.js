const e=Symbol("language resolver updated"),t=new Set;let n;class s{constructor(e){this.language=this.getDocumentLanguage(),this.host=e,this.host.addController(this)}getDocumentLanguage(){const e=document.documentElement.lang||navigator.language||"en-US";try{return Intl.DateTimeFormat.supportedLocalesOf([e]),e}catch(e){return"en-US"}}hostConnected(){var e;this.resolveLanguage(),this.removeLangListener=(e=this.handleLangChange.bind(this),t.add(e),n||(n=new MutationObserver(()=>{for(const e of t)e()}),n.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"]})),()=>{t.delete(e),0===t.size&&(null==n||n.disconnect(),n=void 0)})}hostDisconnected(){var e,t;null==(e=this.unsubscribe)||e.call(this),this.unsubscribe=void 0,null==(t=this.removeLangListener)||t.call(this),this.removeLangListener=void 0}handleLangChange(){if(this.unsubscribe)return;const t=this.getDocumentLanguage();if(t===this.language)return;const n=this.language;this.language=t,this.host.requestUpdate(e,n)}resolveLanguage(){this.language=this.getDocumentLanguage();const t=new CustomEvent("sp-language-context",{bubbles:!0,composed:!0,detail:{callback:(t,n)=>{const s=this.language;this.language=t,this.unsubscribe=n,this.host.requestUpdate(e,s)}},cancelable:!0});this.host.dispatchEvent(t)}}export{s as g,e as o};
//# sourceMappingURL=swc.DtlSiN-G.js.map
