<html><head></head><body><sp-tab-panel class="section" value="overview"> <div class="headerContainer spectrum-Typography"><h2 id="description" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeL">Description</h2> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeL" href="#description"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Description</span></sp-link><sp-divider size="l"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="https://www.w3.org/TR/wai-aria-practices-1.2/#kbd_roving_tabindex">Roving tabindex</sp-link> is a pattern whereby multiple focusable elements are represented by a single <code class="spectrum-Code">tabindex=0</code> element, while the individual elements maintain <code class="spectrum-Code">tabindex=-1</code> and are made accessible via arrow keys after the entry element if focused. This allows keyboard users to quickly tab through a page without having to stop on every element in a large collection. Attaching a <code class="spectrum-Code">RovingTabindexController</code> to your custom element will manage the supplied <code class="spectrum-Code">elements</code> via this pattern.</p> <div class="headerContainer spectrum-Typography"><h3 id="usage" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Usage</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#usage"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Usage</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="https://www.npmjs.com/package/@spectrum-web-components/reactive-controllers"><img src="https://img.shields.io/npm/v/@spectrum-web-components/reactive-controllers?style=for-the-badge" alt="See it on NPM!"></sp-link> <sp-link href="https://bundlephobia.com/result?p=@spectrum-web-components/reactive-controllers"><img src="https://img.shields.io/bundlephobia/minzip/@spectrum-web-components/reactive-controllers?style=for-the-badge" alt="How big is this package in your project?"></sp-link></p> <code-example preprocessed="preprocessed"><pre slot="code">yarn add @spectrum-web-components/reactive-controllers
</pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">Import the <code class="spectrum-Code">RovingTabindexController</code> via:</p> <code-example preprocessed="preprocessed"><pre slot="code">import { RovingTabindexController } from '@spectrum-web-components/reactive-controllers/RovingTabindex.js';
</pre></code-example> <div class="headerContainer spectrum-Typography"><h2 id="example" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeL">Example</h2> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeL" href="#example"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Example</span></sp-link><sp-divider size="l"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">A <code class="spectrum-Code">Container</code> element that manages a collection of <code class="spectrum-Code">&lt;sp-button&gt;</code> elements that are slotted into it from outside might look like the following:</p> <code-example class="language-js" preprocessed="preprocessed"><pre class="language-js" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> html<span class="token punctuation">,</span> LitElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RovingTabindexController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/RovingTabindex.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/button'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Container</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
    rovingTabindexController <span class="token operator">=</span>
        <span class="token keyword">new</span> <span class="token class-name">RovingTabindexController</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span>
        Button <span class="token operator">&gt;</span>
        <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token function-variable function">elements</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'sp-button'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;slot&gt;&lt;/slot&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">The above will default to entering the <code class="spectrum-Code">Container</code> element via the first <code class="spectrum-Code">&lt;sp-button&gt;</code> element every time while making all slotted <code class="spectrum-Code">&lt;sp-button&gt;</code> elements accessible via the the arrow key (<code class="spectrum-Code">ArrowLeft</code>, <code class="spectrum-Code">ArrowRight</code>, <code class="spectrum-Code">ArrowUp</code>, and <code class="spectrum-Code">ArrowDown</code>) managed tab order.</p> <div class="headerContainer spectrum-Typography"><h2 id="options" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeL">Options</h2> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeL" href="#options"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Options</span></sp-link><sp-divider size="l"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">A <code class="spectrum-Code">Container</code> can further customize the implementation of the <code class="spectrum-Code">RovingTabindexController</code> with the following options:</p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li><code class="spectrum-Code">direction</code> to customize how and which arrow keys manage what element is to be focused and accepts a either a string of <code class="spectrum-Code">both</code>, <code class="spectrum-Code">vertical</code>, <code class="spectrum-Code">horizontal</code>, or <code class="spectrum-Code">grid</code> or a method returning one of those strings</li> <li><code class="spectrum-Code">elementEnterAction</code> enacts actions other than <code class="spectrum-Code">focus</code> on the entered element which accepts a method with a signature of <code class="spectrum-Code">(el: T) =&gt; void</code></li> <li><code class="spectrum-Code">elements</code> provides the elements that will have their <code class="spectrum-Code">tabindex</code> managed via a method with a signature of <code class="spectrum-Code">() =&gt; T[]</code></li> <li><code class="spectrum-Code">focusInIndex</code> to control what element will recieve <code class="spectrum-Code">tabindex=0</code> while focus is outside of the <code class="spectrum-Code">Container</code> and accepts a method with a signature of <code class="spectrum-Code">(_elements: T[]) =&gt; number</code></li> <li><code class="spectrum-Code">isFocusableElement</code> describes the state an element much be in to receive <code class="spectrum-Code">focus</code> via a method with a signature of <code class="spectrum-Code">(el: T) =&gt; boolean</code></li> <li><code class="spectrum-Code">listenerScope</code> outlines which parts on a container's DOM when listening for arrow key presses via an element reference or a method returning an element reference with the signature <code class="spectrum-Code">() =&gt; HTMLElement</code></li> </ul> <div class="headerContainer spectrum-Typography"><h2 id="advanced-usage" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeL">Advanced usage</h2> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeL" href="#advanced-usage"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Advanced usage</span></sp-link><sp-divider size="l"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">These options can be combined to form various interfaces from the more default that we saw above to the very complex. Below is another <code class="spectrum-Code">Container</code> that manages slotted <code class="spectrum-Code">&lt;sp-button&gt;</code> elements via the <code class="spectrum-Code">RovingTabindexController</code>. The options provided ensure:</p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>the first focused <code class="spectrum-Code">&lt;sp-button&gt;</code> is the one <code class="spectrum-Code">selected</code> by the container</li> <li>the elements are only focused via the <code class="spectrum-Code">ArrowLeft</code> and <code class="spectrum-Code">ArrowRight</code> keys</li> <li>when an element is focused it becomes the <code class="spectrum-Code">selected</code> element</li> <li>only enabled elements are focusable</li> </ul> <code-example class="language-js" preprocessed="preprocessed"><pre class="language-js" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> html<span class="token punctuation">,</span> LitElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RovingTabindexController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/RovingTabindex.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/button'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Container</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
    rovingTabindexController <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RovingTabindexController</span><span class="token operator">&lt;</span>Button<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">focusInIndex</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">buttons</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selected
            <span class="token operator">?</span> buttons<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>selected<span class="token punctuation">)</span>
            <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">direction</span><span class="token operator">:</span> <span class="token string">'horizontal'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">elementEnterAction</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">button</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selected <span class="token operator">=</span> button<span class="token punctuation">,</span>
        <span class="token function-variable function">elements</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'sp-button'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function-variable function">isFocusableElement</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">button</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>button<span class="token punctuation">.</span>disabled<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    selected<span class="token operator">!</span><span class="token operator">:</span> Button<span class="token punctuation">;</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;slot&gt;&lt;/slot&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">The above usage is very close to what can be seen in the <sp-link href="../components/radio"><code class="spectrum-Code">&lt;sp-radio-group&gt;</code> element</sp-link>.</p> </sp-tab-panel></body></html>