{"version":3,"file":"swc.DNk4rYoy.js","sources":["../../../packages/overlay/src/InteractionController.js","../../../packages/overlay/src/AbstractOverlay.js","../../../packages/overlay/src/overlay-timer.js","../../../tools/shared/src/reparent-children.js","../../../packages/overlay/src/LongpressController.js","../../../packages/overlay/src/strategies.js","../../../packages/overlay/src/ClickController.js","../../../packages/overlay/src/HoverController.js"],"sourcesContent":["\"use strict\";export var InteractionTypes=(r=>(r.click=\"click\",r.hover=\"hover\",r.longpress=\"longpress\",r))(InteractionTypes||{});export const lastInteractionType=Symbol(\"lastInteractionType\"),SAFARI_FOCUS_RING_CLASS=\"remove-focus-ring-safari-hack\";export class InteractionController{constructor(e,{overlay:t,isPersistent:r,handleOverlayReady:i}){this.target=e;this.isLazilyOpen=!1;this.isPersistent=!1;this.isPersistent=!!r,this.handleOverlayReady=i,this.isPersistent&&this.init(),this.overlay=t}get activelyOpening(){return!1}get open(){var e,t;return(t=(e=this.overlay)==null?void 0:e.open)!=null?t:this.isLazilyOpen}set open(e){if(e!==this.open){if(this.isLazilyOpen=e,this.overlay){this.overlay.open=e,this.target[lastInteractionType]=this.type;return}e&&(customElements.whenDefined(\"sp-overlay\").then(async()=>{const{Overlay:t}=await import(\"./Overlay.js\");this.overlay=new t,this.overlay.open=!0,this.target[lastInteractionType]=this.type}),import(\"@spectrum-web-components/overlay/sp-overlay.js\"))}}get overlay(){return this._overlay}set overlay(e){var t;e&&this.overlay!==e&&(this.overlay&&this.overlay.removeController(this),this._overlay=e,this.overlay.addController(this),this.initOverlay(),this.prepareDescription(this.target),(t=this.handleOverlayReady)==null||t.call(this,this.overlay))}prepareDescription(e){}releaseDescription(){}shouldCompleteOpen(){}init(){}initOverlay(){}abort(){var e;this.releaseDescription(),(e=this.abortController)==null||e.abort()}hostConnected(){this.init()}hostDisconnected(){this.isPersistent||this.abort()}}\n//# sourceMappingURL=InteractionController.js.map\n","\"use strict\";import{SpectrumElement as y}from\"@spectrum-web-components/base\";import{reparentChildren as b}from\"@spectrum-web-components/shared/src/reparent-children.js\";import{OverlayTimer as E}from\"./overlay-timer.js\";export const overlayTimer=new E,noop=()=>{},guaranteedAllTransitionend=(i,v,e)=>{const r=new AbortController,n=new Map,a=()=>{r.abort(),e()};let d,l;const t=requestAnimationFrame(()=>{d=requestAnimationFrame(()=>{l=requestAnimationFrame(()=>{a()})})}),p=o=>{o.target===i&&(n.set(o.propertyName,n.get(o.propertyName)-1),n.get(o.propertyName)||n.delete(o.propertyName),n.size===0&&a())},m=o=>{o.target===i&&(n.has(o.propertyName)||n.set(o.propertyName,0),n.set(o.propertyName,n.get(o.propertyName)+1),cancelAnimationFrame(t),cancelAnimationFrame(d),cancelAnimationFrame(l))};i.addEventListener(\"transitionrun\",m,{signal:r.signal}),i.addEventListener(\"transitionend\",p,{signal:r.signal}),i.addEventListener(\"transitioncancel\",p,{signal:r.signal}),v()};export function nextFrame(){return new Promise(i=>requestAnimationFrame(()=>i()))}export class AbstractOverlay extends y{constructor(){super(...arguments);this.dispose=noop;this.offset=0;this.willPreventClose=!1}async applyFocus(e,r){}get delayed(){return!1}set delayed(e){}get disabled(){return!1}set disabled(e){}get elementResolver(){return this._elementResolver}set elementResolver(e){this._elementResolver=e}async ensureOnDOM(e){}async makeTransition(e){return null}async manageDelay(e){}async manageDialogOpen(){}async managePopoverOpen(){}managePosition(){}get open(){return!1}set open(e){}get placementController(){return this._placementController}set placementController(e){this._placementController=e}requestSlottable(){}returnFocus(){}get state(){return\"closed\"}set state(e){}manuallyKeepOpen(){}static update(){const e=new CustomEvent(\"sp-update-overlays\",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(e)}static async open(e,r,n,a){await import(\"@spectrum-web-components/overlay/sp-overlay.js\");const d=arguments.length===2,l=n||e,t=new this;let p=!1;t.dispose=()=>{t.addEventListener(\"sp-closed\",()=>{p||(m(),p=!0),requestAnimationFrame(()=>{t.remove()})}),t.open=!1,t.dispose=noop};const m=b([l],t,{position:\"beforeend\",prepareCallback:s=>{const c=s.slot;return s.removeAttribute(\"slot\"),()=>{s.slot=c}}});if(!d&&l&&a){const s=e,c=r,u=a;return AbstractOverlay.applyOptions(t,{...u,delayed:u.delayed||l.hasAttribute(\"delayed\"),trigger:u.virtualTrigger||s,type:c===\"modal\"?\"modal\":c===\"hover\"?\"hint\":\"auto\"}),s.insertAdjacentElement(\"afterend\",t),await t.updateComplete,t.open=!0,t.dispose}const g=r;return t.append(l),AbstractOverlay.applyOptions(t,{...g,delayed:g.delayed||l.hasAttribute(\"delayed\")}),t.updateComplete.then(()=>{t.open=!0}),t}static applyOptions(e,r){var n,a;e.delayed=!!r.delayed,e.receivesFocus=(n=r.receivesFocus)!=null?n:\"auto\",e.triggerElement=r.trigger||null,e.type=r.type||\"modal\",e.offset=(a=r.offset)!=null?a:0,e.placement=r.placement,e.willPreventClose=!!r.notImmediatelyClosable}setupIOSEventManagement(){this.iosEventPropagationController=new AbortController,this.dialogEl.addEventListener(\"pointerup\",e=>e.stopPropagation(),{capture:!0,signal:this.iosEventPropagationController.signal}),this.dialogEl.addEventListener(\"touchend\",e=>e.stopPropagation(),{capture:!0,signal:this.iosEventPropagationController.signal})}cleanupIOSEventManagement(){var e;(e=this.iosEventPropagationController)==null||e.abort(),this.iosEventPropagationController=void 0}disconnectedCallback(){this.cleanupIOSEventManagement(),super.disconnectedCallback()}}\n//# sourceMappingURL=AbstractOverlay.js.map\n","\"use strict\";const t=1e3,s=1e3;export class OverlayTimer{constructor(e={}){this.warmUpDelay=1e3;this.coolDownDelay=1e3;this.isWarm=!1;this.timeout=0;Object.assign(this,e)}async openTimer(e){if(this.cancelCooldownTimer(),!this.component||e!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=e,this.isWarm?!1:(this.promise=new Promise(o=>{this.resolve=o,this.timeout=window.setTimeout(()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)},this.warmUpDelay)}),this.promise);if(this.promise)return this.promise;throw new Error(\"Inconsistent state\")}close(e){this.component&&this.component===e&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout(()=>{this.isWarm=!1,delete this.cooldownTimeout},this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}}\n//# sourceMappingURL=overlay-timer.js.map\n","\"use strict\";function T(o,i,l=[]){for(let e=0;e<i.length;++e){const n=i[e],r=o[e],t=r.parentElement||r.getRootNode();l[e]&&l[e](n),t&&t!==r&&t.replaceChild(n,r),delete o[e]}return i}export const reparentChildren=(o,i,{position:l,prepareCallback:e}={position:\"beforeend\"})=>{let{length:n}=o;if(n===0)return()=>o;let r=1,t=0;(l===\"afterbegin\"||l===\"afterend\")&&(r=-1,t=n-1);const a=new Array(n),c=new Array(n),p=document.createComment(\"placeholder for reparented element\");do{const d=o[t];e&&(c[t]=e(d)),a[t]=p.cloneNode();const m=d.parentElement||d.getRootNode();m&&m!==d&&m.replaceChild(a[t],d),i.insertAdjacentElement(l,d),t+=r}while(--n>0);return function(){return T(a,o,c)}};\n//# sourceMappingURL=reparent-children.js.map\n","\"use strict\";import{isAndroid as a,isIOS as d}from\"@spectrum-web-components/shared/src/platform.js\";import{conditionAttributeWithId as p}from\"@spectrum-web-components/base/src/condition-attribute-with-id.js\";import{randomID as l}from\"@spectrum-web-components/shared/src/random-id.js\";import{noop as r}from\"./AbstractOverlay.js\";import{InteractionController as h,InteractionTypes as c}from\"./InteractionController.js\";const g=300;export const LONGPRESS_INSTRUCTIONS={touch:\"Double tap and long press for additional options\",keyboard:\"Press Space or Alt+Down Arrow for additional options\",mouse:\"Click and hold for additional options\"};export class LongpressController extends h{constructor(){super(...arguments);this.type=c.longpress;this.longpressState=null;this.releaseDescription=r;this.handlePointerup=()=>{var e;clearTimeout(this.timeout),this.target&&(this.longpressState=((e=this.overlay)==null?void 0:e.state)===\"opening\"?\"pressed\":null,document.removeEventListener(\"pointerup\",this.handlePointerup),document.removeEventListener(\"pointercancel\",this.handlePointerup))}}get activelyOpening(){return this.longpressState===\"opening\"||this.longpressState===\"pressed\"}handleLongpress(){this.open=!0,this.longpressState=this.longpressState===\"potential\"?\"opening\":\"pressed\"}handlePointerdown(e){!this.target||e.button!==0||(this.longpressState=\"potential\",document.addEventListener(\"pointerup\",this.handlePointerup),document.addEventListener(\"pointercancel\",this.handlePointerup),\"holdAffordance\"in this.target)||(this.timeout=setTimeout(()=>{this.target&&this.target.dispatchEvent(new CustomEvent(\"longpress\",{bubbles:!0,composed:!0,detail:{source:\"pointer\"}}))},g))}handleKeydown(e){const{code:t,altKey:o}=e;o&&t===\"ArrowDown\"&&(e.stopPropagation(),e.stopImmediatePropagation())}handleKeyup(e){const{code:t,altKey:o}=e;if(t===\"Space\"||o&&t===\"ArrowDown\"){if(!this.target)return;e.stopPropagation(),this.target.dispatchEvent(new CustomEvent(\"longpress\",{bubbles:!0,composed:!0,detail:{source:\"keyboard\"}})),setTimeout(()=>{this.longpressState=null})}}prepareDescription(e){if(this.releaseDescription!==r||!this.overlay.elements.length)return;const t=document.createElement(\"div\");t.id=`longpress-describedby-descriptor-${l()}`;const o=d()||a()?\"touch\":\"keyboard\";t.textContent=LONGPRESS_INSTRUCTIONS[o],t.slot=\"longpress-describedby-descriptor\";const n=e.getRootNode(),s=this.overlay.getRootNode();n===s?this.overlay.append(t):(t.hidden=!(\"host\"in n),e.insertAdjacentElement(\"afterend\",t));const i=p(e,\"aria-describedby\",[t.id]);this.releaseDescription=()=>{i(),t.remove(),this.releaseDescription=r}}shouldCompleteOpen(){this.longpressState=this.longpressState===\"pressed\"?null:this.longpressState}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"longpress\",()=>this.handleLongpress(),{signal:e}),this.target.addEventListener(\"pointerdown\",o=>this.handlePointerdown(o),{signal:e}),this.prepareDescription(this.target),!this.target.holdAffordance&&(this.target.addEventListener(\"keydown\",o=>this.handleKeydown(o),{signal:e}),this.target.addEventListener(\"keyup\",o=>this.handleKeyup(o),{signal:e}))}}\n//# sourceMappingURL=LongpressController.js.map\n","\"use strict\";import{ClickController as o}from\"./ClickController.js\";import{HoverController as r}from\"./HoverController.js\";import{LongpressController as e}from\"./LongpressController.js\";export const strategies={click:o,longpress:e,hover:r};\n//# sourceMappingURL=strategies.js.map\n","\"use strict\";import{InteractionController as o,InteractionTypes as r}from\"./InteractionController.js\";export class ClickController extends o{constructor(){super(...arguments);this.type=r.click;this.preventNextToggle=!1}handleClick(){this.preventNextToggle||(this.open=!this.open),this.preventNextToggle=!1}handlePointerdown(){this.preventNextToggle=this.open}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"click\",()=>this.handleClick(),{signal:e}),this.target.addEventListener(\"pointerdown\",()=>this.handlePointerdown(),{signal:e})}}\n//# sourceMappingURL=ClickController.js.map\n","\"use strict\";import{conditionAttributeWithId as s}from\"@spectrum-web-components/base/src/condition-attribute-with-id.js\";import{isWebKit as n}from\"@spectrum-web-components/shared\";import{randomID as d}from\"@spectrum-web-components/shared/src/random-id.js\";import{noop as a}from\"./AbstractOverlay.js\";import{InteractionController as v,InteractionTypes as l,lastInteractionType as p,SAFARI_FOCUS_RING_CLASS as o}from\"./InteractionController.js\";const c=300;export class HoverController extends v{constructor(){super(...arguments);this.type=l.hover;this.elementIds=[];this.focusedin=!1;this.pointerentered=!1}handleKeyup(e){(e.code===\"Tab\"||e.code===\"Escape\")&&(this.open=!0,this.removeSafariFocusRingClass())}handleTargetFocusin(){if(this.target.matches(\":focus-visible\")){if(n()&&this.target[p]===l.click){this.target.classList.add(o);return}this.open=!0,this.focusedin=!0,this.removeSafariFocusRingClass()}}handleTargetFocusout(){this.removeSafariFocusRingClass(),this.focusedin=!1,!this.pointerentered&&(this.open=!1)}handleTargetPointerenter(){var e;this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0),!((e=this.overlay)!=null&&e.disabled)&&(this.open=!0,this.pointerentered=!0)}handleTargetPointerleave(){this.doPointerleave()}handleHostPointerenter(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0)}handleHostPointerleave(){this.doPointerleave()}prepareDescription(){if(!this.overlay.elements.length)return;const e=this.target.getRootNode(),t=this.overlay.elements[0].getRootNode(),r=this.overlay.getRootNode();e===r?this.prepareOverlayRelativeDescription():e===t&&this.prepareContentRelativeDescription()}prepareOverlayRelativeDescription(){const e=s(this.target,\"aria-describedby\",[this.overlay.id]);this.releaseDescription=()=>{e(),this.releaseDescription=a}}prepareContentRelativeDescription(){const e=[],t=this.overlay.elements.map(i=>(e.push(i.id),i.id||(i.id=`${this.overlay.tagName.toLowerCase()}-helper-${d()}`),i.id));this.elementIds=e;const r=s(this.target,\"aria-describedby\",t);this.releaseDescription=()=>{r(),this.overlay.elements.map((i,h)=>{i.id=this.elementIds[h]}),this.releaseDescription=a}}doPointerleave(){this.pointerentered=!1;const e=this.target;this.focusedin&&e.matches(\":focus-visible\")||(this.hoverTimeout=setTimeout(()=>{this.open=!1},c))}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"keyup\",r=>this.handleKeyup(r),{signal:e}),this.target.addEventListener(\"focusin\",()=>this.handleTargetFocusin(),{signal:e}),this.target.addEventListener(\"focusout\",()=>this.handleTargetFocusout(),{signal:e}),this.target.addEventListener(\"pointerenter\",()=>this.handleTargetPointerenter(),{signal:e}),this.target.addEventListener(\"pointerleave\",()=>this.handleTargetPointerleave(),{signal:e}),this.overlay&&this.initOverlay()}initOverlay(){if(!this.abortController)return;const{signal:e}=this.abortController;this.overlay.addEventListener(\"pointerenter\",()=>this.handleHostPointerenter(),{signal:e}),this.overlay.addEventListener(\"pointerleave\",()=>this.handleHostPointerleave(),{signal:e})}removeSafariFocusRingClass(){n()&&this.target.classList.contains(o)&&this.target.classList.remove(o)}}\n//# sourceMappingURL=HoverController.js.map\n"],"names":["r","InteractionTypes","click","hover","longpress","lastInteractionType","Symbol","SAFARI_FOCUS_RING_CLASS","InteractionController","constructor","e","overlay","t","isPersistent","handleOverlayReady","i","this","target","isLazilyOpen","init","activelyOpening","open","type","customElements","whenDefined","then","async","Overlay","n","a","import","_overlay","removeController","addController","initOverlay","prepareDescription","call","releaseDescription","shouldCompleteOpen","abort","abortController","hostConnected","hostDisconnected","overlayTimer","warmUpDelay","coolDownDelay","isWarm","timeout","Object","assign","openTimer","cancelCooldownTimer","component","close","promise","Promise","o","resolve","window","setTimeout","Error","resetCooldownTimer","clearTimeout","cooldownTimeout","noop","guaranteedAllTransitionend","v","AbortController","Map","cleanup","d","l","requestAnimationFrame","p","set","propertyName","get","delete","size","addEventListener","has","cancelAnimationFrame","signal","nextFrame","AbstractOverlay","y","arguments","dispose","offset","willPreventClose","applyFocus","delayed","disabled","elementResolver","_elementResolver","ensureOnDOM","makeTransition","manageDelay","manageDialogOpen","managePopoverOpen","managePosition","placementController","_placementController","requestSlottable","returnFocus","state","manuallyKeepOpen","update","CustomEvent","bubbles","composed","cancelable","document","dispatchEvent","length","m","remove","reparentChildren","position","prepareCallback","Array","c","createComment","cloneNode","parentElement","getRootNode","replaceChild","insertAdjacentElement","T","b","s","slot","removeAttribute","u","applyOptions","hasAttribute","trigger","virtualTrigger","updateComplete","g","append","receivesFocus","triggerElement","placement","notImmediatelyClosable","setupIOSEventManagement","iosEventPropagationController","dialogEl","stopPropagation","capture","cleanupIOSEventManagement","disconnectedCallback","super","LONGPRESS_INSTRUCTIONS","touch","keyboard","mouse","strategies","preventNextToggle","handleClick","handlePointerdown","h","longpressState","handlePointerup","removeEventListener","handleLongpress","button","detail","source","handleKeydown","code","altKey","stopImmediatePropagation","handleKeyup","elements","createElement","id","textContent","hidden","holdAffordance","elementIds","focusedin","pointerentered","removeSafariFocusRingClass","handleTargetFocusin","matches","classList","add","handleTargetFocusout","handleTargetPointerenter","hoverTimeout","handleTargetPointerleave","doPointerleave","handleHostPointerenter","handleHostPointerleave","prepareOverlayRelativeDescription","prepareContentRelativeDescription","map","push","tagName","toLowerCase","contains"],"mappings":"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"}