{"version":3,"file":"swc.Br0Pk9Ls.js","sources":["../../../packages/overlay/src/slottable-request-directive.js","../../../packages/overlay/src/overlay-trigger-directive.js"],"sourcesContent":["\"use strict\";import{nothing as n,render as i}from\"@spectrum-web-components/base\";import{AsyncDirective as s,directive as o}from\"@spectrum-web-components/base/src/async-directive.js\";import{removeSlottableRequest as l}from\"./slottable-request-event.js\";export class SlottableRequestDirective extends s{render(e){return n}update(e,[t]){this.template=t,this.target!==e.element&&(this.target=e.element,this.renderBefore=this.target.children[0]),this.listenerHost=this.target,this.init()}handleSlottableRequest(e){if(e.target!==e.currentTarget)return;const t=e.data===l;i(t?void 0:this.template(),this.target,{renderBefore:this.renderBefore})}init(){var t;(t=this.listeners)==null||t.abort(),this.listeners=new AbortController;const{signal:e}=this.listeners;this.listenerHost.addEventListener(\"slottable-request\",r=>this.handleSlottableRequest(r),{signal:e})}disconnected(){var e;(e=this.listeners)==null||e.abort()}reconnected(){this.init()}}export const slottableRequest=o(SlottableRequestDirective);\n//# sourceMappingURL=slottable-request-directive.js.map\n","\"use strict\";import{nothing as g,render as v}from\"@spectrum-web-components/base\";import{directive as h}from\"@spectrum-web-components/base/src/async-directive.js\";import{AbstractOverlay as c}from\"./AbstractOverlay.js\";import{InteractionTypes as O}from\"./InteractionController.js\";import{SlottableRequestDirective as m}from\"./slottable-request-directive.js\";import{removeSlottableRequest as d}from\"./slottable-request-event.js\";import{strategies as f}from\"./strategies.js\";export class OverlayTriggerDirective extends m{constructor(){super(...arguments);this.defaultOptions={triggerInteraction:\"click\",overlayOptions:{type:\"auto\",offset:0}};this.options={...this.defaultOptions.overlayOptions}}render(t,r){return g}update(t,[r,e]){var s,l,a,p;this.options={...this.defaultOptions.overlayOptions,...e==null?void 0:e.overlayOptions},this.insertionOptions=e==null?void 0:e.insertionOptions,this.template=r,this.host=(s=t.options)==null?void 0:s.host;let i=!1;const o=(e==null?void 0:e.triggerInteraction)||this.defaultOptions.triggerInteraction,n=O[(l=this.strategy)==null?void 0:l.type]!==o;this.target!==t.element&&(this.target=t.element,i=!0),(i||n)&&((a=this.strategy)==null||a.abort(),this.strategy=new f[o](this.target,{isPersistent:!0,handleOverlayReady:y=>{this.listenerHost=this.overlay=y,this.init()}})),this.strategy.open=(p=e==null?void 0:e.open)!=null?p:!1}handleSlottableRequest(t){var i,o;if(t.target!==t.currentTarget)return;const r=t.data===d,e={};if(this.host&&(e.host=this.host),v(r?void 0:this.template(),this.overlay,e),r)this.overlay.remove();else{c.applyOptions(this.overlay,{...this.options,trigger:this.target});const n=typeof((i=this.insertionOptions)==null?void 0:i.el)==\"function\"?this.insertionOptions.el():((o=this.insertionOptions)==null?void 0:o.el)||this.target,{where:s=\"afterend\"}=this.insertionOptions||{};n.insertAdjacentElement(s,this.overlay)}}disconnected(){var t;this.overlay&&(this.overlay.open=!1,this.overlay.remove()),(t=this.strategy)==null||t.clearOverlay(),super.disconnected()}reconnected(){}}export const trigger=h(OverlayTriggerDirective);\n//# sourceMappingURL=overlay-trigger-directive.js.map\n"],"names":["SlottableRequestDirective","s","render","e","n","update","t","this","template","target","element","renderBefore","children","listenerHost","init","handleSlottableRequest","currentTarget","data","l","i","listeners","abort","AbortController","signal","addEventListener","r","disconnected","reconnected","trigger","h","m","constructor","super","arguments","defaultOptions","triggerInteraction","overlayOptions","type","offset","options","g","a","p","insertionOptions","host","o","O","strategy","f","isPersistent","handleOverlayReady","y","overlay","open","d","v","remove","c","applyOptions","el","where","insertAdjacentElement","clearOverlay"],"mappings":"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"}