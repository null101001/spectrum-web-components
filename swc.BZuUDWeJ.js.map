{"version":3,"file":"swc.BaBOCi9d.js","sources":["../../../tools/shared/src/focus-visible.js","../../../tools/shared/src/focusable.js"],"sourcesContent":["\"use strict\";let s=!0;try{document.body.querySelector(\":focus-visible\")}catch(a){s=!1,import(\"focus-visible\")}export const FocusVisiblePolyfillMixin=a=>{var t,n;const r=o=>{if(o.shadowRoot==null||o.hasAttribute(\"data-js-focus-visible\"))return()=>{};if(self.applyFocusVisiblePolyfill)self.applyFocusVisiblePolyfill(o.shadowRoot),o.manageAutoFocus&&o.manageAutoFocus();else{const i=()=>{self.applyFocusVisiblePolyfill&&o.shadowRoot&&self.applyFocusVisiblePolyfill(o.shadowRoot),o.manageAutoFocus&&o.manageAutoFocus()};return self.addEventListener(\"focus-visible-polyfill-ready\",i,{once:!0}),()=>{self.removeEventListener(\"focus-visible-polyfill-ready\",i)}}return()=>{}},l=Symbol(\"endPolyfillCoordination\");class c extends(n=a,t=l,n){constructor(){super(...arguments);this[t]=null}connectedCallback(){var e;(e=super.connectedCallback)==null||e.call(this),s||requestAnimationFrame(()=>{this[l]==null&&(this[l]=r(this))})}disconnectedCallback(){var e;(e=super.disconnectedCallback)==null||e.call(this),s||requestAnimationFrame(()=>{this[l]!=null&&(this[l](),this[l]=null)})}}return c};\n//# sourceMappingURL=focus-visible.js.map\n","\"use strict\";var d=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var n=(s,a,e,t)=>{for(var i=t>1?void 0:t?b(a,e):a,o=s.length-1,r;o>=0;o--)(r=s[o])&&(i=(t?r(a,e,i):r(i))||i);return t&&i&&d(a,e,i),i};import{SpectrumElement as h}from\"@spectrum-web-components/base\";import{property as l}from\"@spectrum-web-components/base/src/decorators.js\";import{FocusVisiblePolyfillMixin as f}from\"./focus-visible.js\";function u(){return new Promise(s=>requestAnimationFrame(()=>s()))}export class Focusable extends f(h){constructor(){super(...arguments);this.disabled=!1;this.autofocus=!1;this._tabIndex=0;this.manipulatingTabindex=!1;this.autofocusReady=Promise.resolve()}get tabIndex(){if(this.focusElement===this){const t=this.hasAttribute(\"tabindex\")?Number(this.getAttribute(\"tabindex\")):NaN;return isNaN(t)?-1:t}const e=parseFloat(this.hasAttribute(\"tabindex\")&&this.getAttribute(\"tabindex\")||\"0\");return this.disabled||e<0?-1:this.focusElement?this._tabIndex:e}set tabIndex(e){var t;if(this.manipulatingTabindex){this.manipulatingTabindex=!1;return}if(this.focusElement===this){if(this.disabled)this._tabIndex=e;else if(e!==this._tabIndex){this._tabIndex=e;const i=\"\"+e;this.manipulatingTabindex=!0,this.setAttribute(\"tabindex\",i)}return}if(e===-1?this.addEventListener(\"pointerdown\",this.onPointerdownManagementOfTabIndex):(this.manipulatingTabindex=!0,this.removeEventListener(\"pointerdown\",this.onPointerdownManagementOfTabIndex)),e===-1||this.disabled){if(this.manipulatingTabindex=!0,this.setAttribute(\"tabindex\",\"-1\"),this.removeAttribute(\"focusable\"),this.selfManageFocusElement)return;e!==-1?(this._tabIndex=e,this.manageFocusElementTabindex(e)):(t=this.focusElement)==null||t.removeAttribute(\"tabindex\");return}this.setAttribute(\"focusable\",\"\"),this.hasAttribute(\"tabindex\")?this.removeAttribute(\"tabindex\"):this.manipulatingTabindex=!1,this._tabIndex=e,this.manageFocusElementTabindex(e)}onPointerdownManagementOfTabIndex(){this.tabIndex===-1&&setTimeout(()=>{this.tabIndex=0,this.focus({preventScroll:!0}),this.tabIndex=-1})}async manageFocusElementTabindex(e){this.focusElement||await this.updateComplete,e===null?this.focusElement.removeAttribute(\"tabindex\"):this.focusElement!==this&&(this.focusElement.tabIndex=e)}get focusElement(){throw new Error(\"Must implement focusElement getter!\")}get selfManageFocusElement(){return!1}focus(e){this.disabled||!this.focusElement||(this.focusElement!==this?this.focusElement.focus(e):HTMLElement.prototype.focus.apply(this,[e]))}blur(){const e=this.focusElement||this;e!==this?e.blur():HTMLElement.prototype.blur.apply(this)}click(){if(this.disabled)return;const e=this.focusElement||this;e!==this?e.click():HTMLElement.prototype.click.apply(this)}manageAutoFocus(){this.autofocus&&(this.dispatchEvent(new KeyboardEvent(\"keydown\",{code:\"Tab\"})),this.focusElement.focus())}firstUpdated(e){super.firstUpdated(e),(!this.hasAttribute(\"tabindex\")||this.getAttribute(\"tabindex\")!==\"-1\")&&this.setAttribute(\"focusable\",\"\")}update(e){e.has(\"disabled\")&&this.handleDisabledChanged(this.disabled,e.get(\"disabled\")),super.update(e)}updated(e){super.updated(e),e.has(\"disabled\")&&this.disabled&&this.blur()}async handleDisabledChanged(e,t){const i=()=>this.focusElement!==this&&typeof this.focusElement.disabled!=\"undefined\";e?(this.manipulatingTabindex=!0,this.setAttribute(\"tabindex\",\"-1\"),await this.updateComplete,i()?this.focusElement.disabled=!0:this.setAttribute(\"aria-disabled\",\"true\")):t&&(this.manipulatingTabindex=!0,this.focusElement===this?this.setAttribute(\"tabindex\",\"\"+this._tabIndex):this.removeAttribute(\"tabindex\"),await this.updateComplete,i()?this.focusElement.disabled=!1:this.removeAttribute(\"aria-disabled\"))}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.autofocusReady,e}connectedCallback(){super.connectedCallback(),this.autofocus&&(this.autofocusReady=(async()=>{await u(),await u()})(),this.updateComplete.then(()=>{this.manageAutoFocus()}))}}n([l({type:Boolean,reflect:!0})],Focusable.prototype,\"disabled\",2),n([l({type:Boolean})],Focusable.prototype,\"autofocus\",2),n([l({type:Number})],Focusable.prototype,\"tabIndex\",1);\n//# sourceMappingURL=focusable.js.map\n"],"names":["s","document","body","querySelector","a","import","then","n","f","FocusVisiblePolyfillMixin","t","l","Symbol","c","constructor","super","arguments","this","connectedCallback","e","call","requestAnimationFrame","o","shadowRoot","hasAttribute","self","applyFocusVisiblePolyfill","i","coordinationHandler","manageAutoFocus","addEventListener","once","removeEventListener","r","disconnectedCallback","u","Promise","Focusable","h","disabled","autofocus","_tabIndex","manipulatingTabindex","autofocusReady","resolve","tabIndex","focusElement","Number","getAttribute","NaN","isNaN","parseFloat","onPointerdownManagementOfTabIndex","setAttribute","removeAttribute","selfManageFocusElement","manageFocusElementTabindex","setTimeout","focus","preventScroll","updateComplete","Error","HTMLElement","prototype","apply","blur","click","dispatchEvent","KeyboardEvent","code","firstUpdated","update","has","handleDisabledChanged","get","updated","canSetDisabled","getUpdateComplete","type","Boolean","reflect"],"mappings":"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"}