{"version":3,"file":"swc.Ji-9c7to.js","sources":["../../../tools/base/src/constants.js","../../../packages/menu/src/menu.css.js","../../../packages/menu/src/Menu.js","../../../packages/menu/sp-menu.js","../../../packages/menu/src/menu-item.css.js","../../../packages/menu/src/MenuItem.js","../../../packages/menu/sp-menu-item.js"],"sourcesContent":["\"use strict\";export const INPUT_COMPONENT_TAGS=[\"SP-SEARCH\",\"SP-TEXTFIELD\",\"SP-NUMBER-FIELD\",\"SP-COMBOBOX\",\"SP-COLOR-FIELD\"],INPUT_COMPONENT_PATTERN=new RegExp(`^(${INPUT_COMPONENT_TAGS.join(\"|\")})$`);\n//# sourceMappingURL=constants.js.map\n","\"use strict\";import{css as e}from\"@spectrum-web-components/base\";const t=e`\n    :host{--spectrum-menu-item-background-color-hover:var(--system-menu-item-background-color-hover);--spectrum-menu-item-background-color-down:var(--system-menu-item-background-color-down);--spectrum-menu-item-background-color-key-focus:var(--system-menu-item-background-color-key-focus);--spectrum-menu-item-corner-radius:var(--system-menu-item-corner-radius);--spectrum-menu-item-focus-indicator-shadow:var(--system-menu-item-focus-indicator-shadow);--spectrum-menu-item-focus-indicator-offset:var(--system-menu-item-focus-indicator-offset);--spectrum-menu-item-spacing-multiplier:var(--system-menu-item-spacing-multiplier);--spectrum-menu-item-focus-indicator-outline-style:var(--system-menu-item-focus-indicator-outline-style)}@media (forced-colors:active){:host{--highcontrast-menu-item-background-color-default:ButtonFace;--highcontrast-menu-item-color-default:ButtonText;--highcontrast-menu-item-background-color-focus:Highlight;--highcontrast-menu-item-color-focus:HighlightText;--highcontrast-menu-checkmark-icon-color-default:Highlight;--highcontrast-menu-item-color-disabled:GrayText;--highcontrast-menu-item-focus-indicator-color:Highlight;--highcontrast-menu-item-selected-background-color:Highlight;--highcontrast-menu-item-selected-color:HighlightText}@supports (color:SelectedItem){:host{--highcontrast-menu-item-selected-background-color:SelectedItem;--highcontrast-menu-item-selected-color:SelectedItemText}}}:host{--spectrum-menu-item-top-to-action:var(--spectrum-spacing-50);--spectrum-menu-item-top-to-checkbox:var(--spectrum-spacing-50);--spectrum-menu-item-label-line-height:var(--spectrum-line-height-100);--spectrum-menu-item-label-line-height-cjk:var(--spectrum-cjk-line-height-100);--spectrum-menu-item-label-to-description-spacing:var(--spectrum-menu-item-label-to-description);--spectrum-menu-item-focus-indicator-width:var(--mod-menu-item-focus-indicator-width,var(--spectrum-border-width-200));--spectrum-menu-item-focus-indicator-color:var(--spectrum-blue-800);--spectrum-menu-item-label-to-value-area-min-spacing:var(--spectrum-spacing-100);--spectrum-menu-item-label-content-color-default:var(--spectrum-neutral-content-color-default);--spectrum-menu-item-label-content-color-hover:var(--spectrum-neutral-content-color-hover);--spectrum-menu-item-label-content-color-down:var(--spectrum-neutral-content-color-down);--spectrum-menu-item-label-content-color-focus:var(--spectrum-neutral-content-color-key-focus);--spectrum-menu-item-label-icon-color-default:var(--spectrum-neutral-content-color-default);--spectrum-menu-item-label-icon-color-hover:var(--spectrum-neutral-content-color-hover);--spectrum-menu-item-label-icon-color-down:var(--spectrum-neutral-content-color-down);--spectrum-menu-item-label-icon-color-focus:var(--spectrum-neutral-content-color-key-focus);--spectrum-menu-item-label-content-color-disabled:var(--spectrum-disabled-content-color);--spectrum-menu-item-label-icon-color-disabled:var(--spectrum-disabled-content-color);--spectrum-menu-item-description-line-height:var(--spectrum-line-height-100);--spectrum-menu-item-description-line-height-cjk:var(--spectrum-cjk-line-height-100);--spectrum-menu-item-description-color-default:var(--spectrum-neutral-subdued-content-color-default);--spectrum-menu-item-description-color-hover:var(--spectrum-neutral-subdued-content-color-hover);--spectrum-menu-item-description-color-down:var(--spectrum-neutral-subdued-content-color-down);--spectrum-menu-item-description-color-focus:var(--spectrum-neutral-subdued-content-color-key-focus);--spectrum-menu-item-description-color-disabled:var(--spectrum-disabled-content-color);--spectrum-menu-section-header-line-height:var(--spectrum-line-height-100);--spectrum-menu-section-header-line-height-cjk:var(--spectrum-cjk-line-height-100);--spectrum-menu-section-header-font-weight:var(--spectrum-bold-font-weight);--spectrum-menu-section-header-color:var(--spectrum-gray-900);--spectrum-menu-collapsible-icon-color:var(--spectrum-gray-900);--spectrum-menu-checkmark-icon-color-default:var(--spectrum-accent-color-900);--spectrum-menu-checkmark-icon-color-hover:var(--spectrum-accent-color-1000);--spectrum-menu-checkmark-icon-color-down:var(--spectrum-accent-color-1100);--spectrum-menu-checkmark-icon-color-focus:var(--spectrum-accent-color-1000);--spectrum-menu-drillin-icon-color-default:var(--spectrum-neutral-subdued-content-color-default);--spectrum-menu-drillin-icon-color-hover:var(--spectrum-neutral-subdued-content-color-hover);--spectrum-menu-drillin-icon-color-down:var(--spectrum-neutral-subdued-content-color-down);--spectrum-menu-drillin-icon-color-focus:var(--spectrum-neutral-subdued-content-color-key-focus);--spectrum-menu-item-value-color-default:var(--spectrum-neutral-subdued-content-color-default);--spectrum-menu-item-value-color-hover:var(--spectrum-neutral-subdued-content-color-hover);--spectrum-menu-item-value-color-down:var(--spectrum-neutral-subdued-content-color-down);--spectrum-menu-item-value-color-focus:var(--spectrum-neutral-subdued-content-color-key-focus);--spectrum-menu-checkmark-display-hidden:none;--spectrum-menu-checkmark-display-shown:block;--spectrum-menu-checkmark-display:var(--spectrum-menu-checkmark-display-shown);--spectrum-menu-item-min-height:var(--spectrum-component-height-100);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-100);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-100);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-100);--spectrum-menu-item-label-text-to-visual:var(--spectrum-text-to-visual-100);--spectrum-menu-item-label-inline-edge-to-content:var(--spectrum-component-edge-to-text-100);--spectrum-menu-item-top-edge-to-text:var(--spectrum-component-top-to-text-100);--spectrum-menu-item-bottom-edge-to-text:var(--spectrum-component-bottom-to-text-100);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-100);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-75);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-100);--spectrum-menu-section-header-min-width:var(--spectrum-component-height-100);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(--spectrum-menu-item-selectable-edge-to-text-not-selected-medium);--spectrum-menu-item-checkmark-height:var(--spectrum-menu-item-checkmark-height-medium);--spectrum-menu-item-checkmark-width:var(--spectrum-menu-item-checkmark-width-medium);--spectrum-menu-item-top-to-checkmark:var(--spectrum-menu-item-top-to-selected-icon-medium);--spectrum-menu-back-icon-margin:var(--spectrum-navigational-indicator-top-to-back-icon-medium);--spectrum-menu-item-collapsible-no-icon-submenu-item-padding-x-start:calc(var(--spectrum-menu-item-label-inline-edge-to-content) + var(--spectrum-menu-item-checkmark-width) + var(--spectrum-menu-item-label-text-to-visual) + var(--spectrum-menu-item-focus-indicator-width));--spectrum-menu-item-focus-indicator-color-default:var(--highcontrast-menu-item-focus-indicator-color,var(--mod-menu-item-focus-indicator-color,var(--spectrum-menu-item-focus-indicator-color)));--spectrum-menu-item-focus-indicator-border-width:calc(var(--spectrum-menu-item-focus-indicator-width)*var(--spectrum-menu-item-focus-indicator-direction-scalar,1))}:host([size=s]){--spectrum-menu-item-min-height:var(--spectrum-component-height-75);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-75);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-75);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-75);--spectrum-menu-item-label-text-to-visual:var(--spectrum-text-to-visual-75);--spectrum-menu-item-label-inline-edge-to-content:var(--spectrum-component-edge-to-text-75);--spectrum-menu-item-top-edge-to-text:var(--spectrum-component-top-to-text-75);--spectrum-menu-item-bottom-edge-to-text:var(--spectrum-component-bottom-to-text-75);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-75);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-50);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-75);--spectrum-menu-section-header-min-width:var(--spectrum-component-height-75);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(--spectrum-menu-item-selectable-edge-to-text-not-selected-small);--spectrum-menu-item-checkmark-height:var(--spectrum-menu-item-checkmark-height-small);--spectrum-menu-item-checkmark-width:var(--spectrum-menu-item-checkmark-width-small);--spectrum-menu-item-top-to-checkmark:var(--spectrum-menu-item-top-to-selected-icon-small);--spectrum-menu-back-icon-margin:var(--spectrum-navigational-indicator-top-to-back-icon-small)}:host([size=l]){--spectrum-menu-item-min-height:var(--spectrum-component-height-200);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-200);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-200);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-200);--spectrum-menu-item-label-text-to-visual:var(--spectrum-text-to-visual-200);--spectrum-menu-item-label-inline-edge-to-content:var(--spectrum-component-edge-to-text-200);--spectrum-menu-item-top-edge-to-text:var(--spectrum-component-top-to-text-200);--spectrum-menu-item-bottom-edge-to-text:var(--spectrum-component-bottom-to-text-200);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-200);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-100);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-200);--spectrum-menu-section-header-min-width:var(--spectrum-component-height-200);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(--spectrum-menu-item-selectable-edge-to-text-not-selected-large);--spectrum-menu-item-checkmark-height:var(--spectrum-menu-item-checkmark-height-large);--spectrum-menu-item-checkmark-width:var(--spectrum-menu-item-checkmark-width-large);--spectrum-menu-item-top-to-checkmark:var(--spectrum-menu-item-top-to-selected-icon-large);--spectrum-menu-back-icon-margin:var(--spectrum-navigational-indicator-top-to-back-icon-large)}:host([size=xl]){--spectrum-menu-item-min-height:var(--spectrum-component-height-300);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-300);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-300);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-300);--spectrum-menu-item-label-text-to-visual:var(--spectrum-text-to-visual-300);--spectrum-menu-item-label-inline-edge-to-content:var(--spectrum-component-edge-to-text-300);--spectrum-menu-item-top-edge-to-text:var(--spectrum-component-top-to-text-300);--spectrum-menu-item-bottom-edge-to-text:var(--spectrum-component-bottom-to-text-300);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-300);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-200);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-300);--spectrum-menu-section-header-min-width:var(--spectrum-component-height-300);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(--spectrum-menu-item-selectable-edge-to-text-not-selected-extra-large);--spectrum-menu-item-checkmark-height:var(--spectrum-menu-item-checkmark-height-extra-large);--spectrum-menu-item-checkmark-width:var(--spectrum-menu-item-checkmark-width-extra-large);--spectrum-menu-item-top-to-checkmark:var(--spectrum-menu-item-top-to-selected-icon-extra-large);--spectrum-menu-back-icon-margin:var(--spectrum-navigational-indicator-top-to-back-icon-extra-large)}:host(:dir(rtl)){--spectrum-menu-item-focus-indicator-direction-scalar:-1}:host{box-sizing:border-box;inline-size:var(--mod-menu-inline-size,auto);margin:0;padding:0;list-style-type:none;display:inline-block;overflow:auto}:host:lang(ja),:host:lang(ko),:host:lang(zh){--spectrum-menu-item-label-line-height:var(--mod-menu-item-label-line-height-cjk,var(--spectrum-menu-item-label-line-height-cjk));--spectrum-menu-item-description-line-height:var(--mod-menu-item-description-line-height-cjk,var(--spectrum-menu-item-description-line-height-cjk));--spectrum-menu-section-header-line-height:var(--mod-menu-section-header-line-height-cjk,var(--spectrum-menu-section-header-line-height-cjk))}:host([selects]) ::slotted(sp-menu-item){--spectrum-menu-checkmark-display:var(--spectrum-menu-checkmark-display-hidden);padding-inline-start:var(--mod-menu-item-selectable-edge-to-text-not-selected,var(--spectrum-menu-item-selectable-edge-to-text-not-selected))}:host([selects]) ::slotted(sp-menu-item[selected]){--spectrum-menu-checkmark-display:var(--spectrum-menu-checkmark-display-shown);padding-inline-start:var(--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content))}.spectrum-Menu-backIcon{margin-block:var(--mod-menu-back-icon-margin-block,var(--spectrum-menu-back-icon-margin));margin-inline:var(--mod-menu-back-icon-margin-inline,var(--spectrum-menu-back-icon-margin));color:var(--highcontrast-menu-item-color-default,var(--mod-menu-back-icon-color-default,var(--spectrum-menu-section-header-color)));fill:var(--highcontrast-menu-item-color-default,var(--mod-menu-back-icon-color-default,var(--spectrum-menu-section-header-color)))}.spectrum-Menu-back:focus-visible{border-radius:var(--spectrum-menu-item-corner-radius);box-shadow:var(--spectrum-menu-item-focus-indicator-shadow)var(--spectrum-menu-item-focus-indicator-border-width)0 0 0 var(--spectrum-menu-item-focus-indicator-color-default);outline:var(--spectrum-menu-item-focus-indicator-width)var(--spectrum-menu-item-focus-indicator-outline-style)var(--spectrum-menu-item-focus-indicator-color-default);outline-offset:var(--spectrum-menu-item-focus-indicator-offset)}.spectrum-Menu-sectionHeading{min-inline-size:var(--mod-menu-section-header-min-width,var(--spectrum-menu-section-header-min-width));padding-block-start:var(--mod-menu-section-header-top-edge-to-text,var(--mod-menu-item-top-edge-to-text,var(--spectrum-menu-item-top-edge-to-text)));padding-block-end:var(--mod-menu-section-header-bottom-edge-to-text,var(--mod-menu-item-bottom-edge-to-text,var(--spectrum-menu-item-bottom-edge-to-text)));padding-inline:var(--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content));font-size:var(--mod-menu-section-header-font-size,var(--spectrum-menu-section-header-font-size));font-weight:var(--mod-menu-section-header-font-weight,var(--spectrum-menu-section-header-font-weight));line-height:var(--mod-menu-section-header-line-height,var(--spectrum-menu-section-header-line-height));color:var(--highcontrast-menu-item-color-default,var(--mod-menu-section-header-color,var(--spectrum-menu-section-header-color)));grid-area:sectionHeadingArea/1/sectionHeadingArea/-1;display:block}.spectrum-Menu-back{padding-block:var(--mod-menu-back-padding-block-start,0)var(--mod-menu-back-padding-block-end,0);padding-inline:var(--mod-menu-back-padding-inline-start,0)var(--mod-menu-back-padding-inline-end,var(--spectrum-menu-item-label-inline-edge-to-content));flex-flow:wrap;align-items:center;display:flex}.spectrum-Menu-back .spectrum-Menu-sectionHeading{padding:0}.spectrum-Menu-backButton{cursor:pointer;background:0 0;border:0;margin:0;padding:0;display:inline-flex}.spectrum-Menu-backButton:focus-visible{outline:var(--spectrum-focus-indicator-thickness)solid var(--spectrum-focus-indicator-color);outline-offset:calc((var(--spectrum-focus-indicator-thickness) + 1px)*-1)}.spectrum-Menu-backHeading{font-size:var(--mod-menu-section-header-font-size,var(--spectrum-menu-section-header-font-size));font-weight:var(--mod-menu-section-header-font-weight,var(--spectrum-menu-section-header-font-weight));line-height:var(--mod-menu-section-header-line-height,var(--spectrum-menu-section-header-line-height));color:var(--highcontrast-menu-item-color-default,var(--mod-menu-back-heading-color,var(--spectrum-menu-section-header-color)));display:block}:host{width:var(--swc-menu-width);flex-direction:column}:host(:focus){outline:none}::slotted(*){flex-shrink:0}\n`;export default t;\n//# sourceMappingURL=menu.css.js.map\n","\"use strict\";var v=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var d=(p,c,e,s)=>{for(var t=s>1?void 0:s?b(c,e):c,i=p.length-1,n;i>=0;i--)(n=p[i])&&(t=(s?n(c,e,t):n(t))||t);return s&&t&&v(c,e,t),t};import{html as I,SizedMixin as g,SpectrumElement as f}from\"@spectrum-web-components/base\";import{property as u,query as S}from\"@spectrum-web-components/base/src/decorators.js\";import{RovingTabindexController as E}from\"@spectrum-web-components/reactive-controllers/src/RovingTabindex.js\";import y from\"./menu.css.js\";export class Menu extends g(f,{noDefaultSize:!0}){constructor(){super();this.touchStartY=void 0;this.touchStartTime=void 0;this.isCurrentlyScrolling=!1;this.scrollThreshold=10;this.scrollTimeThreshold=300;this.label=\"\";this.ignore=!1;this.value=\"\";this.valueSeparator=\",\";this._selected=[];this.selectedItems=[];this.childItemSet=new Set;this.focusedItemIndex=0;this.focusInItemIndex=0;this.shouldSupportDragAndSelect=!1;this.selectedItemsMap=new Map;this.pointerUpTarget=null;this.descendentOverlays=new Map;this.handleSubmenuClosed=e=>{e.stopPropagation(),e.composedPath()[0].dispatchEvent(new Event(\"sp-menu-submenu-closed\",{bubbles:!0,composed:!0}))};this.handleSubmenuOpened=e=>{e.stopPropagation(),e.composedPath()[0].dispatchEvent(new Event(\"sp-menu-submenu-opened\",{bubbles:!0,composed:!0})),e.composedPath().find(i=>this.childItemSet.has(i))};this._hasUpdatedSelectedItemIndex=!1;this._willUpdateItems=!1;this.cacheUpdated=Promise.resolve();this.resolveCacheUpdated=()=>{};!this.rovingTabindexController&&this.controlsRovingTabindex&&(this.rovingTabindexController=new E(this,{direction:\"vertical\",focusInIndex:e=>{let s=-1;const t=e==null?void 0:e.findIndex((i,n)=>(!e[s]&&!i.disabled&&(s=n),i.selected&&!i.disabled));return e&&t&&e[t]?t:s},elements:()=>this.childItems,isFocusableElement:this.isFocusableElement.bind(this),hostDelegatesFocus:!0,stopKeyEventPropagation:!0})),this.addEventListener(\"sp-menu-item-added-or-updated\",this.onSelectableItemAddedOrUpdated),this.addEventListener(\"sp-menu-item-added-or-updated\",this.onFocusableItemAddedOrUpdated,{capture:!0}),this.addEventListener(\"click\",this.handleClick),this.addEventListener(\"touchend\",this.handlePointerup),this.addEventListener(\"focusout\",this.handleFocusout),this.addEventListener(\"sp-menu-item-keydown\",this.handleKeydown),this.addEventListener(\"pointerup\",this.handlePointerup),this.addEventListener(\"sp-opened\",this.handleSubmenuOpened),this.addEventListener(\"sp-closed\",this.handleSubmenuClosed),this.addEventListener(\"touchstart\",this.handleTouchStart,{passive:!0}),this.addEventListener(\"touchmove\",this.handleTouchMove,{passive:!0})}static get styles(){return[y]}get isSubmenu(){return this.slot===\"submenu\"}get isScrolling(){return this.isCurrentlyScrolling}set isScrolling(e){this.isCurrentlyScrolling=e}get selected(){return this.selects?this._selected:[]}set selected(e){if(e===this.selected)return;const s=this.selected;this._selected=e,this.selectedItems=[],this.selectedItemsMap.clear(),this.childItems.forEach(t=>{this===t.menuData.selectionRoot&&(t.selected=this.selected.includes(t.value),t.selected&&(this.selectedItems.push(t),this.selectedItemsMap.set(t,!0)))}),this.requestUpdate(\"selected\",s)}get focusInItem(){var e;return(e=this.rovingTabindexController)==null?void 0:e.focusInElement}get controlsRovingTabindex(){return!0}get childItems(){return this.cachedChildItems||(this.cachedChildItems=this.updateCachedMenuItems()),this.cachedChildItems}updateCachedMenuItems(){var t;if(!this.menuSlot)return[];const e=[],s=this.menuSlot.assignedElements({flatten:!0});for(const[i,n]of s.entries()){if(this.childItemSet.has(n)){e.push(n);continue}const o=n.localName===\"slot\"?n.assignedElements({flatten:!0}):[...n.querySelectorAll(\":scope > *\")];s.splice(i,1,n,...o)}return this.cachedChildItems=[...e],(t=this.rovingTabindexController)==null||t.clearElementCache(),this.cachedChildItems}get childRole(){if(this.resolvedRole===\"listbox\")return\"option\";switch(this.resolvedSelects){case\"single\":return\"menuitemradio\";case\"multiple\":return\"menuitemcheckbox\";default:return\"menuitem\"}}get ownRole(){return\"menu\"}onFocusableItemAddedOrUpdated(e){e.menuCascade.set(this,{hadFocusRoot:!!e.item.menuData.focusRoot,ancestorWithSelects:e.currentAncestorWithSelects}),this.selects&&(e.currentAncestorWithSelects=this),e.item.menuData.focusRoot=e.item.menuData.focusRoot||this}onSelectableItemAddedOrUpdated(e){var i,n;if(!e.menuCascade.get(this))return;if(e.item.menuData.parentMenu=e.item.menuData.parentMenu||this,this.addChildItem(e.item),this.selects===\"inherit\"){this.resolvedSelects=\"inherit\";const l=(i=e.currentAncestorWithSelects)==null?void 0:i.ignore;this.resolvedRole=l?\"none\":((n=e.currentAncestorWithSelects)==null?void 0:n.getAttribute(\"role\"))||this.getAttribute(\"role\")||void 0}else this.selects?(this.resolvedRole=this.ignore?\"none\":this.getAttribute(\"role\")||void 0,this.resolvedSelects=this.selects):(this.resolvedRole=this.ignore?\"none\":this.getAttribute(\"role\")||void 0,this.resolvedSelects=this.resolvedRole===\"none\"?\"ignore\":\"none\");if(this.resolvedRole===\"none\")return;const t=this.resolvedSelects===\"single\"||this.resolvedSelects===\"multiple\";e.item.menuData.cleanupSteps.push(l=>this.removeChildItem(l)),(t||!this.selects&&this.resolvedSelects!==\"ignore\")&&!e.item.menuData.selectionRoot&&(e.item.setRole(this.childRole),e.item.menuData.selectionRoot=e.item.menuData.selectionRoot||this,e.item.selected&&(this.selectedItemsMap.set(e.item,!0),this.selectedItems=[...this.selectedItems,e.item],this._selected=[...this.selected,e.item.value],this.value=this.selected.join(this.valueSeparator)))}addChildItem(e){this.childItemSet.add(e),this.handleItemsChanged()}async removeChildItem(e){(e.focused||e.hasAttribute(\"focused\")||e.active)&&(this._updateFocus=this.getNeighboringFocusableElement(e)),this.childItemSet.delete(e),this.cachedChildItems=void 0}focusOnFirstSelectedItem({preventScroll:e}={}){var t;if(!this.rovingTabindexController)return;const s=this.selectedItems.find(i=>this.isFocusableElement(i));if(!s){this.focus({preventScroll:e});return}s&&!e&&s.scrollIntoView({block:\"nearest\"}),(t=this.rovingTabindexController)==null||t.focusOnItem(s)}focus({preventScroll:e}={}){if(this.rovingTabindexController){if(!this.childItems.length||this.childItems.every(s=>s.disabled))return;if(this.childItems.some(s=>s.menuData.focusRoot!==this)){super.focus({preventScroll:e});return}this.rovingTabindexController.focus({preventScroll:e})}}handleTouchStart(e){e.touches.length===1&&(this.touchStartY=e.touches[0].clientY,this.touchStartTime=Date.now(),this.isCurrentlyScrolling=!1)}handleTouchMove(e){if(e.touches.length===1&&this.touchStartY!==void 0&&this.touchStartTime!==void 0){const s=e.touches[0].clientY,t=Math.abs(s-this.touchStartY),i=Date.now()-this.touchStartTime;t>this.scrollThreshold&&i<this.scrollTimeThreshold&&(this.isCurrentlyScrolling=!0)}}handleTouchEnd(){setTimeout(()=>{this.isCurrentlyScrolling=!1,this.touchStartY=void 0,this.touchStartTime=void 0},100)}handleFocusout(){var e;this.matches(\":focus-within\")||(e=this.rovingTabindexController)==null||e.reset()}handleClick(e){if(this.pointerUpTarget===e.target){this.pointerUpTarget=null;return}this.handlePointerBasedSelection(e)}handlePointerup(e){this.handleTouchEnd(),this.shouldSupportDragAndSelect&&(this.pointerUpTarget=e.target,this.handlePointerBasedSelection(e))}async handlePointerBasedSelection(e){var i,n;if(e instanceof MouseEvent&&e.button!==0||this.isScrolling)return;const t=e.composedPath().find(l=>l instanceof Element?l.getAttribute(\"role\")===this.childRole:!1);if(e.defaultPrevented){const l=this.childItems.indexOf(t);((i=t==null?void 0:t.menuData)==null?void 0:i.focusRoot)===this&&l>-1&&(this.focusedItemIndex=l);return}if(t!=null&&t.href&&t.href.length){this.dispatchEvent(new Event(\"change\",{bubbles:!0,composed:!0}));return}else if(((n=t==null?void 0:t.menuData)==null?void 0:n.selectionRoot)===this&&this.childItems.length){if(e.preventDefault(),t.hasSubmenu||t.open)return;this.selectOrToggleItem(t)}else return;this.prepareToCleanUp()}handleDescendentOverlayOpened(e){const s=e.composedPath()[0];s.overlayElement&&this.descendentOverlays.set(s.overlayElement,s.overlayElement)}handleDescendentOverlayClosed(e){const s=e.composedPath()[0];s.overlayElement&&this.descendentOverlays.delete(s.overlayElement)}getNeighboringFocusableElement(e,s=!1){var o;const t=s?-1:1,i=((o=this.rovingTabindexController)==null?void 0:o.elements)||[],n=e?i.indexOf(e):-1;let l=Math.min(Math.max(0,n+t),i.length-1);for(;!this.isFocusableElement(i[l])&&0<l&&l<i.length-1;)l+=t;return this.isFocusableElement(i[l])?i[l]:e||i[0]}async selectOrToggleItem(e){var r;const s=this.resolvedSelects,t=new Map(this.selectedItemsMap),i=this.selected.slice(),n=this.selectedItems.slice(),l=this.value;if(e.menuData.selectionRoot!==this)return;if(s===\"multiple\"){this.selectedItemsMap.has(e)?this.selectedItemsMap.delete(e):this.selectedItemsMap.set(e,!0);const a=[],m=[];this.childItemSet.forEach(h=>{h.menuData.selectionRoot===this&&this.selectedItemsMap.has(h)&&(a.push(h.value),m.push(h))}),this._selected=a,this.selectedItems=m,this.value=this.selected.join(this.valueSeparator)}else this.selectedItemsMap.clear(),this.selectedItemsMap.set(e,!0),this.value=e.value,this._selected=[e.value],this.selectedItems=[e];if(!this.dispatchEvent(new Event(\"change\",{cancelable:!0,bubbles:!0,composed:!0}))){this._selected=i,this.selectedItems=n,this.selectedItemsMap=t,this.value=l;return}if(s===\"single\"){for(const a of t.keys())a!==e&&(a.selected=!1);e.selected=!0}else s===\"multiple\"?e.selected=!e.selected:!e.hasSubmenu&&((r=e==null?void 0:e.menuData)==null?void 0:r.focusRoot)===this&&this.dispatchEvent(new Event(\"close\",{bubbles:!0}))}navigateBetweenRelatedMenus(e){const{key:s,root:t}=e,i=this.dir,n=i===\"ltr\"&&s===\"ArrowRight\"||i===\"rtl\"&&s===\"ArrowLeft\",l=i===\"ltr\"&&s===\"ArrowLeft\"||i===\"rtl\"&&s===\"ArrowRight\"||s===\"Escape\",o=t;n?o!=null&&o.hasSubmenu&&(e.stopPropagation(),o.openOverlay(!0)):l&&this.isSubmenu&&(e.stopPropagation(),this.dispatchEvent(new Event(\"close\",{bubbles:!0})),this.updateSelectedItemIndex())}handleKeydown(e){var o;if(e.defaultPrevented||!this.rovingTabindexController)return;const{key:s,root:t,shiftKey:i,target:n}=e,l=[\"Enter\",\" \"].includes(s);if(i&&n!==this&&this.hasAttribute(\"tabindex\")){this.removeAttribute(\"tabindex\");const r=a=>{!a.shiftKey&&!this.hasAttribute(\"tabindex\")&&(document.removeEventListener(\"keyup\",r),this.removeEventListener(\"focusout\",r))};document.addEventListener(\"keyup\",r),this.addEventListener(\"focusout\",r)}if(s===\"Tab\"){this.closeDescendentOverlays();return}if(l&&(t!=null&&t.hasSubmenu)&&!t.open){e.preventDefault(),t.openOverlay(!0);return}if(s===\" \"||s===\"Enter\"){e.preventDefault(),(o=t==null?void 0:t.focusElement)==null||o.click(),t&&this.selectOrToggleItem(t);return}this.navigateBetweenRelatedMenus(e)}prepareToCleanUp(){document.addEventListener(\"focusout\",()=>{requestAnimationFrame(()=>{const e=this.focusInItem;e&&(e.focused=!1)})},{once:!0})}updateSelectedItemIndex(){let e=0;const s=new Map,t=[],i=[];let n=this.childItems.length;for(;n;){n-=1;const l=this.childItems[n];l.menuData.selectionRoot===this&&((l.selected||!this._hasUpdatedSelectedItemIndex&&this.selected.includes(l.value))&&(e=n,s.set(l,!0),t.unshift(l.value),i.unshift(l)),n!==e&&(l.focused=!1))}this.selectedItemsMap=s,this._selected=t,this.selectedItems=i,this.value=this.selected.join(this.valueSeparator),this.focusedItemIndex=e,this.focusInItemIndex=e}handleItemsChanged(){this.cachedChildItems=void 0,this._willUpdateItems||(this._willUpdateItems=!0,this.cacheUpdated=this.updateCache())}async updateCache(){this.hasUpdated?await new Promise(e=>requestAnimationFrame(()=>e(!0))):await Promise.all([new Promise(e=>requestAnimationFrame(()=>e(!0))),this.updateComplete]),this.cachedChildItems===void 0&&(this.updateSelectedItemIndex(),this.updateItemFocus()),this._willUpdateItems=!1}updateItemFocus(){var e;(e=this.focusInItem)==null||e.setAttribute(\"tabindex\",\"0\"),this.childItems.length!=0}closeDescendentOverlays(){this.descendentOverlays.forEach(e=>{e.open=!1}),this.descendentOverlays=new Map}handleSlotchange({target:e}){var t;const s=e.assignedElements({flatten:!0});this.childItems.length!==s.length&&s.forEach(i=>{typeof i.triggerUpdate!=\"undefined\"?i.triggerUpdate():typeof i.childItems!=\"undefined\"&&i.childItems.forEach(n=>{n.triggerUpdate()})}),this._updateFocus&&((t=this.rovingTabindexController)==null||t.focusOnItem(this._updateFocus),this._updateFocus=void 0)}renderMenuItemSlot(){return I`\n      <slot\n        @sp-menu-submenu-opened=${this.handleDescendentOverlayOpened}\n        @sp-menu-submenu-closed=${this.handleDescendentOverlayClosed}\n        @slotchange=${this.handleSlotchange}\n      ></slot>\n    `}render(){return this.renderMenuItemSlot()}firstUpdated(e){super.firstUpdated(e);const s=[new Promise(t=>requestAnimationFrame(()=>t(!0)))];[...this.children].forEach(t=>{t.localName===\"sp-menu-item\"&&s.push(t.updateComplete)}),this.childItemsUpdated=Promise.all(s)}updated(e){super.updated(e),e.has(\"selects\")&&this.hasUpdated&&this.selectsChanged(),e.has(\"label\")&&(this.label||typeof e.get(\"label\")!=\"undefined\")&&(this.label?this.setAttribute(\"aria-label\",this.label):this.removeAttribute(\"aria-label\"))}selectsChanged(){const e=[new Promise(s=>requestAnimationFrame(()=>s(!0)))];this.childItemSet.forEach(s=>{e.push(s.triggerUpdate())}),this.childItemsUpdated=Promise.all(e)}connectedCallback(){super.connectedCallback(),!this.hasAttribute(\"role\")&&!this.ignore&&this.setAttribute(\"role\",this.ownRole),this.updateComplete.then(()=>this.updateItemFocus())}isFocusableElement(e){return e?!e.disabled:!1}disconnectedCallback(){this.cachedChildItems=void 0,this.selectedItems=[],this.selectedItemsMap.clear(),this.childItemSet.clear(),this.descendentOverlays=new Map,super.disconnectedCallback()}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.childItemsUpdated,await this.cacheUpdated,e}}Menu.shadowRootOptions={...f.shadowRootOptions,delegatesFocus:!0},d([u({type:String,reflect:!0})],Menu.prototype,\"label\",2),d([u({type:Boolean,reflect:!0})],Menu.prototype,\"ignore\",2),d([u({type:String,reflect:!0})],Menu.prototype,\"selects\",2),d([u({type:String})],Menu.prototype,\"value\",2),d([u({type:String,attribute:\"value-separator\"})],Menu.prototype,\"valueSeparator\",2),d([u({attribute:!1})],Menu.prototype,\"selected\",1),d([u({attribute:!1})],Menu.prototype,\"selectedItems\",2),d([S(\"slot:not([name])\")],Menu.prototype,\"menuSlot\",2);\n//# sourceMappingURL=Menu.js.map\n","\"use strict\";import{defineElement as e}from\"@spectrum-web-components/base/src/define-element.js\";import{Menu as m}from\"./src/Menu.js\";e(\"sp-menu\",m);\n//# sourceMappingURL=sp-menu.js.map\n","\"use strict\";import{css as e}from\"@spectrum-web-components/base\";const o=e`\n    .checkmark{display:var(--mod-menu-checkmark-display,var(--spectrum-menu-checkmark-display));inline-size:var(--mod-menu-item-checkmark-width,var(--spectrum-menu-item-checkmark-width));block-size:var(--mod-menu-item-checkmark-height,var(--spectrum-menu-item-checkmark-height));color:var(--highcontrast-menu-checkmark-icon-color-default,var(--mod-menu-checkmark-icon-color-default,var(--spectrum-menu-checkmark-icon-color-default)));opacity:1;fill:var(--highcontrast-menu-checkmark-icon-color-default,var(--mod-menu-checkmark-icon-color-default,var(--spectrum-menu-checkmark-icon-color-default)));grid-area:checkmarkArea;align-self:start;margin-block-start:calc(var(--mod-menu-item-top-to-checkmark,var(--spectrum-menu-item-top-to-checkmark)) - var(--mod-menu-item-top-edge-to-text,var(--spectrum-menu-item-top-edge-to-text)));margin-inline-end:var(--mod-menu-item-text-to-control,var(--spectrum-menu-item-text-to-control))}.chevron{inline-size:var(--spectrum-menu-item-checkmark-width);block-size:var(--spectrum-menu-item-checkmark-height);grid-area:chevronArea;align-self:center;margin-inline-end:var(--mod-menu-item-text-to-control,var(--spectrum-menu-item-text-to-control))}.spectrum-Menu-back:focus-visible{border-radius:var(--spectrum-menu-item-corner-radius);box-shadow:var(--spectrum-menu-item-focus-indicator-shadow)var(--spectrum-menu-item-focus-indicator-border-width)0 0 0 var(--spectrum-menu-item-focus-indicator-color-default);outline:var(--spectrum-menu-item-focus-indicator-width)var(--spectrum-menu-item-focus-indicator-outline-style)var(--spectrum-menu-item-focus-indicator-color-default);outline-offset:var(--spectrum-menu-item-focus-indicator-offset)}.spectrum-Menu-backButton:focus-visible{outline:var(--spectrum-focus-indicator-thickness)solid var(--spectrum-focus-indicator-color);outline-offset:calc((var(--spectrum-focus-indicator-thickness) + 1px)*-1)}::slotted([slot=icon]){color:var(--highcontrast-menu-item-color-default,var(--mod-menu-item-label-icon-color-default,var(--spectrum-menu-item-label-icon-color-default)));fill:var(--highcontrast-menu-item-color-default,var(--mod-menu-item-label-icon-color-default,var(--spectrum-menu-item-label-icon-color-default)));grid-area:iconArea;align-self:start;margin-inline-end:var(--mod-menu-item-label-text-to-visual,var(--spectrum-menu-item-label-text-to-visual))}:host{box-sizing:border-box;min-block-size:var(--mod-menu-item-min-height,var(--spectrum-menu-item-min-height));padding-block-start:var(--mod-menu-item-top-edge-to-text,var(--spectrum-menu-item-top-edge-to-text));padding-block-end:var(--mod-menu-item-bottom-edge-to-text,var(--spectrum-menu-item-bottom-edge-to-text));padding-inline:var(--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content));margin:calc((var(--spectrum-menu-item-focus-indicator-offset) + var(--spectrum-menu-item-focus-indicator-width))*var(--spectrum-menu-item-spacing-multiplier));line-height:var(--mod-menu-item-label-line-height,var(--spectrum-menu-item-label-line-height));background-color:var(--highcontrast-menu-item-background-color-default,var(--mod-menu-item-background-color-default,var(--spectrum-menu-item-background-color-default)));border-radius:var(--spectrum-menu-item-corner-radius);cursor:pointer;grid-template:\".chevronAreaCollapsible.headingIconArea sectionHeadingArea. . .\"1fr\"selectedArea chevronAreaCollapsible checkmarkArea iconArea labelArea valueArea actionsArea chevronAreaDrillIn\"\". . . .descriptionArea. . .\"\". . . .submenuArea. . .\"/auto auto auto auto 1fr auto auto auto;align-items:center;-webkit-text-decoration:none;text-decoration:none;display:grid;position:relative}.spectrum-Menu-itemCheckbox{--mod-checkbox-top-to-text:0;--mod-checkbox-text-to-control:0;min-block-size:0}.spectrum-Menu-itemCheckbox .spectrum-Checkbox-box{margin-block-start:var(--mod-menu-item-top-to-checkbox,var(--spectrum-menu-item-top-to-checkbox));margin-block-end:0;margin-inline-end:var(--mod-menu-item-text-to-control,var(--spectrum-menu-item-text-to-control))}.spectrum-Menu-itemSwitch{min-block-size:0}.spectrum-Menu-itemSwitch .spectrum-Switch-switch{margin-block-start:var(--mod-menu-item-top-to-action,var(--spectrum-menu-item-top-to-action));margin-block-end:0}#label{grid-area:submenuItemLabelArea}::slotted([slot=value]){grid-area:submenuItemValueArea}:host([focused]),:host(:focus){background-color:var(--highcontrast-menu-item-background-color-focus,var(--mod-menu-item-background-color-key-focus,var(--spectrum-menu-item-background-color-key-focus)));outline:none}:host([focused])>#label,:host(:focus)>#label{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-label-content-color-focus,var(--spectrum-menu-item-label-content-color-focus)))}:host([focused])>[name=description]::slotted(*),:host(:focus)>[name=description]::slotted(*){color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-description-color-focus,var(--spectrum-menu-item-description-color-focus)))}:host([focused])>::slotted([slot=value]),:host(:focus)>::slotted([slot=value]){color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-value-color-focus,var(--spectrum-menu-item-value-color-focus)))}:host([focused])>.icon:not(.chevron,.checkmark),:host(:focus)>.icon:not(.chevron,.checkmark){color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-label-icon-color-focus,var(--spectrum-menu-item-label-icon-color-focus)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-label-icon-color-focus,var(--spectrum-menu-item-label-icon-color-focus)))}:host([focused])>.chevron,:host(:focus)>.chevron{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-collapsible-icon-color,var(--spectrum-menu-collapsible-icon-color)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-collapsible-icon-color,var(--spectrum-menu-collapsible-icon-color)))}:host([focused])>.checkmark,:host(:focus)>.checkmark{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-checkmark-icon-color-focus,var(--spectrum-menu-checkmark-icon-color-focus)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-checkmark-icon-color-focus,var(--spectrum-menu-checkmark-icon-color-focus)))}:host(:is(:active,[active])){background-color:var(--highcontrast-menu-item-background-color-focus,var(--mod-menu-item-background-color-down,var(--spectrum-menu-item-background-color-down)))}:host(:is(:active,[active]))>#label{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-label-content-color-down,var(--spectrum-menu-item-label-content-color-down)))}:host(:is(:active,[active]))>[name=description]::slotted(*){color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-description-color-down,var(--spectrum-menu-item-description-color-down)))}:host(:is(:active,[active]))>::slotted([slot=value]){color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-value-color-down,var(--spectrum-menu-item-value-color-down)))}:host(:is(:active,[active]))>.icon:not(.chevron,.checkmark){color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-label-icon-color-down,var(--spectrum-menu-item-label-icon-color-down)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-label-icon-color-down,var(--spectrum-menu-item-label-icon-color-down)))}:host(:is(:active,[active]))>.chevron{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-collapsible-icon-color,var(--spectrum-menu-collapsible-icon-color)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-collapsible-icon-color,var(--spectrum-menu-collapsible-icon-color)))}:host(:is(:active,[active]))>.checkmark{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-checkmark-icon-color-down,var(--spectrum-menu-checkmark-icon-color-down)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-checkmark-icon-color-down,var(--spectrum-menu-checkmark-icon-color-down)))}:host([disabled]),:host([aria-disabled=true]){background-color:initial}:host([disabled]) #label,:host([disabled]) ::slotted([slot=value]),:host([aria-disabled=true]) #label,:host([aria-disabled=true]) ::slotted([slot=value]){color:var(--highcontrast-menu-item-color-disabled,var(--mod-menu-item-label-content-color-disabled,var(--spectrum-menu-item-label-content-color-disabled)))}:host([disabled]) [name=description]::slotted(*),:host([aria-disabled=true]) [name=description]::slotted(*){color:var(--highcontrast-menu-item-color-disabled,var(--mod-menu-item-description-color-disabled,var(--spectrum-menu-item-description-color-disabled)))}:host([disabled]) ::slotted([slot=icon]),:host([aria-disabled=true]) ::slotted([slot=icon]){color:var(--highcontrast-menu-item-color-disabled,var(--mod-menu-item-label-icon-color-disabled,var(--spectrum-menu-item-label-icon-color-disabled)));fill:var(--highcontrast-menu-item-color-disabled,var(--mod-menu-item-label-icon-color-disabled,var(--spectrum-menu-item-label-icon-color-disabled)))}:host([focused]) .spectrum-Menu-back,:host([focused]){border-radius:var(--spectrum-menu-item-corner-radius);box-shadow:var(--spectrum-menu-item-focus-indicator-shadow)var(--spectrum-menu-item-focus-indicator-border-width)0 0 0 var(--spectrum-menu-item-focus-indicator-color-default);outline:var(--spectrum-menu-item-focus-indicator-width)var(--spectrum-menu-item-focus-indicator-outline-style)var(--spectrum-menu-item-focus-indicator-color-default);outline-offset:var(--spectrum-menu-item-focus-indicator-offset)}.spectrum-Menu-itemSelection{grid-area:selectedArea}#label{--mod-switch-control-label-spacing:0;--mod-switch-spacing-top-to-label:0;font-size:var(--mod-menu-item-label-font-size,var(--spectrum-menu-item-label-font-size));color:var(--highcontrast-menu-item-color-default,var(--mod-menu-item-label-content-color-default,var(--spectrum-menu-item-label-content-color-default)));hyphens:auto;overflow-wrap:break-word;grid-area:labelArea}::slotted([slot=value]){font-size:var(--mod-menu-item-label-font-size,var(--spectrum-menu-item-label-font-size));color:var(--highcontrast-menu-item-color-default,var(--mod-menu-item-value-color-default,var(--spectrum-menu-item-value-color-default)));grid-area:valueArea;justify-self:end}.spectrum-Menu-itemActions,::slotted([slot=value]){align-self:start;margin-inline-start:var(--mod-menu-item-label-to-value-area-min-spacing,var(--spectrum-menu-item-label-to-value-area-min-spacing))}.spectrum-Menu-itemActions{grid-area:actionsArea}[name=description]::slotted(*){font-size:var(--mod-menu-item-description-font-size,var(--spectrum-menu-item-description-font-size));line-height:var(--mod-menu-item-description-line-height,var(--spectrum-menu-item-description-line-height));color:var(--highcontrast-menu-item-color-default,var(--mod-menu-item-description-color-default,var(--spectrum-menu-item-description-color-default)));hyphens:auto;overflow-wrap:break-word;grid-area:descriptionArea;margin-block-start:var(--mod-menu-item-label-to-description-spacing,var(--spectrum-menu-item-label-to-description-spacing))}:host([no-wrap]) #label{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.spectrum-Menu-item--collapsible.is-open{padding-block-end:0}.spectrum-Menu-item--collapsible.is-open .chevron{transform:rotate(90deg)}:host([focused]) .spectrum-Menu-item--collapsible.is-open,:host(:is(:active,[active])) .spectrum-Menu-item--collapsible.is-open,.spectrum-Menu-item--collapsible.is-open:focus{background-color:var(--highcontrast-menu-item-background-color-default,var(--mod-menu-item-background-color-default,var(--spectrum-menu-item-background-color-default)))}.spectrum-Menu-item--collapsible ::slotted([slot=icon]){grid-area:headingIconArea}.spectrum-Menu-item--collapsible>::slotted([slot=icon]){padding-block-start:var(--mod-menu-section-header-top-edge-to-text,var(--mod-menu-item-top-edge-to-text,var(--spectrum-menu-item-top-edge-to-text)));padding-block-end:var(--mod-menu-section-header-bottom-edge-to-text,var(--mod-menu-item-bottom-edge-to-text,var(--spectrum-menu-item-bottom-edge-to-text)))}.spectrum-Menu-item--collapsible .chevron{grid-area:chevronAreaCollapsible}:host([has-submenu]) .chevron{color:var(--highcontrast-menu-item-color-default,var(--mod-menu-drillin-icon-color-default,var(--spectrum-menu-drillin-icon-color-default)));fill:var(--highcontrast-menu-item-color-default,var(--mod-menu-drillin-icon-color-default,var(--spectrum-menu-drillin-icon-color-default)));grid-area:chevronAreaDrillIn;margin-inline-start:var(--mod-menu-item-label-to-value-area-min-spacing,var(--spectrum-menu-item-label-to-value-area-min-spacing));margin-inline-end:0}:host([has-submenu]) .is-open{--spectrum-menu-item-background-color-default:var(--highcontrast-menu-item-selected-background-color,var(--mod-menu-item-background-color-hover,var(--spectrum-menu-item-background-color-hover)))}:host([has-submenu]) .is-open .icon:not(.chevron,.checkmark){color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-label-icon-color-hover,var(--spectrum-menu-item-label-icon-color-hover)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-label-icon-color-hover,var(--spectrum-menu-item-label-icon-color-hover)))}:host([has-submenu]) .is-open .chevron{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-drillin-icon-color-hover,var(--spectrum-menu-drillin-icon-color-hover)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-drillin-icon-color-hover,var(--spectrum-menu-drillin-icon-color-hover)))}:host([has-submenu]) .is-open .checkmark{color:var(--highcontrast-menu-checkmark-icon-color-default,var(--mod-menu-checkmark-icon-color-hover,var(--spectrum-menu-checkmark-icon-color-hover)));fill:var(--highcontrast-menu-checkmark-icon-color-default,var(--mod-menu-checkmark-icon-color-hover,var(--spectrum-menu-checkmark-icon-color-hover)))}@media (hover:hover){:host(:hover){background-color:var(--highcontrast-menu-item-background-color-focus,var(--mod-menu-item-background-color-hover,var(--spectrum-menu-item-background-color-hover)))}:host(:hover)>#label{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-label-content-color-hover,var(--spectrum-menu-item-label-content-color-hover)))}:host(:hover)>[name=description]::slotted(*){color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-description-color-hover,var(--spectrum-menu-item-description-color-hover)))}:host(:hover)>::slotted([slot=value]){color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-value-color-hover,var(--spectrum-menu-item-value-color-hover)))}:host(:hover)>.icon:not(.chevron,.checkmark){color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-label-icon-color-hover,var(--spectrum-menu-item-label-icon-color-hover)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-item-label-icon-color-hover,var(--spectrum-menu-item-label-icon-color-hover)))}:host(:hover)>.chevron{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-collapsible-icon-color,var(--spectrum-menu-collapsible-icon-color)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-collapsible-icon-color,var(--spectrum-menu-collapsible-icon-color)))}:host(:hover)>.checkmark{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-checkmark-icon-color-hover,var(--spectrum-menu-checkmark-icon-color-hover)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-checkmark-icon-color-hover,var(--spectrum-menu-checkmark-icon-color-hover)))}:host([disabled]:hover),:host([aria-disabled=true]:hover){background-color:initial;cursor:default}:host([disabled]:hover) #label,:host([disabled]:hover) ::slotted([slot=value]),:host([aria-disabled=true]:hover) #label,:host([aria-disabled=true]:hover) ::slotted([slot=value]){color:var(--highcontrast-menu-item-color-disabled,var(--mod-menu-item-label-content-color-disabled,var(--spectrum-menu-item-label-content-color-disabled)))}:host([disabled]:hover) [name=description]::slotted(*),:host([aria-disabled=true]:hover) [name=description]::slotted(*){color:var(--highcontrast-menu-item-color-disabled,var(--mod-menu-item-description-color-disabled,var(--spectrum-menu-item-description-color-disabled)))}:host([disabled]:hover) ::slotted([slot=icon]),:host([aria-disabled=true]:hover) ::slotted([slot=icon]){color:var(--highcontrast-menu-item-color-disabled,var(--mod-menu-item-label-icon-color-disabled,var(--spectrum-menu-item-label-icon-color-disabled)));fill:var(--highcontrast-menu-item-color-disabled,var(--mod-menu-item-label-icon-color-disabled,var(--spectrum-menu-item-label-icon-color-disabled)))}.spectrum-Menu-item--collapsible.is-open:hover{background-color:var(--highcontrast-menu-item-background-color-default,var(--mod-menu-item-background-color-default,var(--spectrum-menu-item-background-color-default)))}:host([has-submenu]:hover) .chevron{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-drillin-icon-color-hover,var(--spectrum-menu-drillin-icon-color-hover)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-drillin-icon-color-hover,var(--spectrum-menu-drillin-icon-color-hover)))}}:host([has-submenu][focused]) .chevron,:host([has-submenu]:focus) .chevron{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-drillin-icon-color-focus,var(--spectrum-menu-drillin-icon-color-focus)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-drillin-icon-color-focus,var(--spectrum-menu-drillin-icon-color-focus)))}:host([has-submenu]:is(:active,[active])) .chevron{color:var(--highcontrast-menu-item-color-focus,var(--mod-menu-drillin-icon-color-down,var(--spectrum-menu-drillin-icon-color-down)));fill:var(--highcontrast-menu-item-color-focus,var(--mod-menu-drillin-icon-color-down,var(--spectrum-menu-drillin-icon-color-down)))}.spectrum-Menu-back{padding-block:var(--mod-menu-back-padding-block-start,0)var(--mod-menu-back-padding-block-end,0);padding-inline:var(--mod-menu-back-padding-inline-start,0)var(--mod-menu-back-padding-inline-end,var(--spectrum-menu-item-label-inline-edge-to-content));flex-flow:wrap;align-items:center;display:flex}.spectrum-Menu-backButton{cursor:pointer;background:0 0;border:0;margin:0;padding:0;display:inline-flex}:host([focused]) .spectrum-Menu-backButton{outline:var(--spectrum-focus-indicator-thickness)solid var(--spectrum-focus-indicator-color);outline-offset:calc((var(--spectrum-focus-indicator-thickness) + 1px)*-1)}.spectrum-Menu-backHeading{font-size:var(--mod-menu-section-header-font-size,var(--spectrum-menu-section-header-font-size));font-weight:var(--mod-menu-section-header-font-weight,var(--spectrum-menu-section-header-font-weight));line-height:var(--mod-menu-section-header-line-height,var(--spectrum-menu-section-header-line-height));color:var(--highcontrast-menu-item-color-default,var(--mod-menu-back-heading-color,var(--spectrum-menu-section-header-color)));display:block}:host{text-align:initial}:host([hidden]){display:none}:host([disabled]){pointer-events:none}:host([disabled]) [name=value]::slotted(*),:host([has-submenu][disabled]) .chevron{color:var(--highcontrast-menu-item-color-disabled,var(--mod-menu-item-label-icon-color-disabled,var(--spectrum-menu-item-label-icon-color-disabled)))}#button{position:absolute;inset:0}sp-popover{margin-block-start:var(--system-submenu-offset-block,-5px)}:host(:dir(ltr)) [icon-only]::slotted(:last-of-type){margin-right:auto}:host(:dir(rtl)) [icon-only]::slotted(:last-of-type){margin-left:auto}@media (forced-colors:active){:host{forced-color-adjust:none}}::slotted([slot=submenu]){width:max-content;max-width:100%;overflow-y:auto}:host([no-wrap]) #label{display:block}:host([focused]:not(:focus-visible)){box-shadow:none;outline:none}\n`;export default o;\n//# sourceMappingURL=menu-item.css.js.map\n","\"use strict\";var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var r=(a,n,e,t)=>{for(var i=t>1?void 0:t?p(n,e):n,o=a.length-1,d;o>=0;o--)(d=a[o])&&(i=(t?d(n,e,i):d(i))||i);return t&&i&&c(n,e,i),i};import{MutationController as m}from\"@lit-labs/observers/mutation-controller.js\";import{html as l,INPUT_COMPONENT_PATTERN as v,nothing as h}from\"@spectrum-web-components/base\";import{property as s,query as u}from\"@spectrum-web-components/base/src/decorators.js\";import f from\"@spectrum-web-components/icon/src/spectrum-icon-checkmark.css.js\";import b from\"@spectrum-web-components/icon/src/spectrum-icon-chevron.css.js\";import{SlottableRequestEvent as E}from\"@spectrum-web-components/overlay/src/slottable-request-event.js\";import{DependencyManagerController as y}from\"@spectrum-web-components/reactive-controllers/src/DependencyManger.js\";import{ObserveSlotPresence as g,ObserveSlotText as S,randomID as C}from\"@spectrum-web-components/shared\";import{Focusable as T}from\"@spectrum-web-components/shared/src/focusable.js\";import{LikeAnchor as P}from\"@spectrum-web-components/shared/src/like-anchor.js\";import\"@spectrum-web-components/icons-ui/icons/sp-icon-checkmark100.js\";import\"@spectrum-web-components/icons-ui/icons/sp-icon-chevron100.js\";import _ from\"./menu-item.css.js\";const M=100;export class MenuItemAddedOrUpdatedEvent extends Event{constructor(e){super(\"sp-menu-item-added-or-updated\",{bubbles:!0,composed:!0});this.menuCascade=new WeakMap;this.clear(e)}clear(e){this._item=e,this.currentAncestorWithSelects=void 0,e.menuData={cleanupSteps:[],focusRoot:void 0,selectionRoot:void 0,parentMenu:void 0},this.menuCascade=new WeakMap}get item(){return this._item}}export class MenuItemKeydownEvent extends KeyboardEvent{constructor({root:n,event:e}){super(\"sp-menu-item-keydown\",{bubbles:!0,composed:!0}),this.root=n,this._event=e}get altKey(){var n;return((n=this._event)==null?void 0:n.altKey)||!1}get code(){var n;return((n=this._event)==null?void 0:n.code)||\"\"}get ctrlKey(){var n;return((n=this._event)==null?void 0:n.ctrlKey)||!1}get isComposing(){var n;return((n=this._event)==null?void 0:n.isComposing)||!1}get key(){var n;return((n=this._event)==null?void 0:n.key)||\"\"}get location(){var n;return((n=this._event)==null?void 0:n.location)||0}get metaKey(){var n;return((n=this._event)==null?void 0:n.metaKey)||!1}get repeat(){var n;return((n=this._event)==null?void 0:n.repeat)||!1}get shiftKey(){var n;return((n=this._event)==null?void 0:n.shiftKey)||!1}}export class MenuItem extends P(S(g(T,'[slot=\"icon\"]'))){constructor(){super();this.active=!1;this.dependencyManager=new y(this);this.focused=!1;this.selected=!1;this._value=\"\";this.hasSubmenu=!1;this.noWrap=!1;this.open=!1;this._openedViaKeyboard=!1;this._closedViaPointer=!1;this._touchHandledViaPointerup=!1;this.handleSlottableRequest=e=>{var t;(t=this.submenuElement)==null||t.dispatchEvent(new E(e.name,e.data))};this.proxyFocus=()=>{this.focus()};this.handleTouchSubmenuToggle=e=>{var t;e.pointerId===this._activePointerId&&((t=this._touchAbortController)==null||t.abort(),this._touchHandledViaPointerup=!0,this._activePointerId=void 0,this.open?this.open=!1:this.openOverlay(),setTimeout(()=>{this._touchHandledViaPointerup=!1},0))};this.handleTouchCleanup=e=>{var t;e.pointerId===this._activePointerId&&((t=this._touchAbortController)==null||t.abort(),this._activePointerId=void 0,this._touchHandledViaPointerup=!1)};this.handleKeydown=e=>{const{target:t,key:i}=e,o=this.hasSubmenu&&!this.open&&[\" \",\"Enter\"].includes(i);t===this&&(([\"ArrowLeft\",\"ArrowRight\",\"Escape\"].includes(i)||o)&&e.preventDefault(),this.dispatchEvent(new MenuItemKeydownEvent({root:this,event:e})))};this.handleBeforetoggle=e=>{e.newState===\"closed\"&&(this.open=!0,this.overlayElement.manuallyKeepOpen(),this.overlayElement.removeEventListener(\"beforetoggle\",this.handleBeforetoggle))};this.recentlyLeftChild=!1;this.willDispatchUpdate=!1;this.menuData={focusRoot:void 0,parentMenu:void 0,selectionRoot:void 0,cleanupSteps:[]};this.addEventListener(\"click\",this.handleClickCapture,{capture:!0}),this.addEventListener(\"focus\",this.handleFocus),this.addEventListener(\"blur\",this.handleBlur),new m(this,{config:{characterData:!0,childList:!0,subtree:!0,attributeFilter:[\"src\"]},callback:e=>{e.every(i=>i.target.slot===\"submenu\")||this.breakItemChildrenCache()}})}static get styles(){return[_,f,b]}get value(){return this._value||this.itemText}set value(e){e!==this._value&&(this._value=e||\"\",this._value?this.setAttribute(\"value\",this._value):this.removeAttribute(\"value\"))}get itemText(){return this.itemChildren.content.reduce((e,t)=>e+(t.textContent||\"\").trim(),\"\")}get focusElement(){return this}get hasIcon(){return this.slotContentIsPresent}get itemChildren(){if(!this.iconSlot||!this.contentSlot)return{icon:[],content:[]};if(this._itemChildren)return this._itemChildren;const e=this.iconSlot.assignedElements().map(i=>{const o=i.cloneNode(!0);return o.removeAttribute(\"slot\"),o.classList.toggle(\"icon\"),o}),t=this.contentSlot.assignedNodes().map(i=>i.cloneNode(!0));return this._itemChildren={icon:e,content:t},this._itemChildren}handleClickCapture(e){if(this.disabled)return e.preventDefault(),e.stopImmediatePropagation(),!1;this.shouldProxyClick()}shouldProxyClick(){let e=!1;return this.anchorElement&&(this.anchorElement.click(),e=!0),e}breakItemChildrenCache(){this._itemChildren=void 0,this.triggerUpdate()}renderSubmenu(){const e=l`\n      <slot\n        name=\"submenu\"\n        @slotchange=${this.manageSubmenu}\n        @sp-menu-item-added-or-updated=${{handleEvent:t=>{t.clear(t.item)},capture:!0}}\n        @focusin=${t=>t.stopPropagation()}\n      ></slot>\n    `;return this.hasSubmenu?(this.dependencyManager.add(\"sp-overlay\"),this.dependencyManager.add(\"sp-popover\"),import(\"@spectrum-web-components/overlay/sp-overlay.js\"),import(\"@spectrum-web-components/popover/sp-popover.js\"),l`\n      <sp-overlay\n        receives-focus=\"false\"\n        .triggerElement=${this}\n        ?disabled=${!this.hasSubmenu}\n        ?open=${this.hasSubmenu&&this.open&&this.dependencyManager.loaded}\n        .placement=${this.dir===\"ltr\"?\"right-start\":\"left-start\"}\n        receives-focus=\"false\"\n        .offset=${[-10,0]}\n        .type=${\"auto\"}\n        @close=${t=>t.stopPropagation()}\n        @slottable-request=${this.handleSlottableRequest}\n      >\n        <sp-popover\n          @change=${t=>{this.handleSubmenuChange(t),this.open=!1}}\n          @pointerenter=${this.handleSubmenuPointerenter}\n          @pointerleave=${this.handleSubmenuPointerleave}\n          @sp-menu-item-added-or-updated=${t=>t.stopPropagation()}\n        >\n          ${e}\n        </sp-popover>\n      </sp-overlay>\n      <sp-icon-chevron100\n        class=\"spectrum-UIIcon-ChevronRight100 chevron icon\"\n      ></sp-icon-chevron100>\n    `):e}render(){return l`\n      ${this.selected?l`\n            <sp-icon-checkmark100\n              id=\"selected\"\n              class=\"spectrum-UIIcon-Checkmark100\n                            icon\n                            checkmark\n                            ${this.hasIcon?\"checkmark--withAdjacentIcon\":\"\"}\"\n            ></sp-icon-checkmark100>\n          `:h}\n      <slot name=\"icon\"></slot>\n      <div id=\"label\">\n        <slot id=\"slot\"></slot>\n      </div>\n      <slot name=\"description\"></slot>\n      <slot name=\"value\"></slot>\n      ${this.href&&this.href.length>0?super.renderAnchor({id:\"button\",ariaHidden:!0,className:\"button anchor hidden\"}):h}\n      ${this.renderSubmenu()}\n    `}manageSubmenu(e){this.submenuElement=e.target.assignedElements({flatten:!0})[0],this.hasSubmenu=!!this.submenuElement,this.hasSubmenu&&this.setAttribute(\"aria-haspopup\",\"true\")}handlePointerdown(e){var o;const t=e.composedPath(),i=this.overlayElement&&t.includes(this.overlayElement);e.pointerType===\"touch\"&&this.hasSubmenu&&!i&&this._activePointerId===void 0&&(this._activePointerId=e.pointerId,this._touchAbortController=new AbortController,window.addEventListener(\"pointerup\",this.handleTouchSubmenuToggle,{once:!0,signal:this._touchAbortController.signal}),window.addEventListener(\"pointercancel\",this.handleTouchCleanup,{once:!0,signal:this._touchAbortController.signal})),!i&&this.hasSubmenu&&this.open&&e.pointerType!==\"touch\"&&(this.addEventListener(\"focus\",this.handleSubmenuFocus,{once:!0}),(o=this.overlayElement)==null||o.addEventListener(\"beforetoggle\",this.handleBeforetoggle))}firstUpdated(e){super.firstUpdated(e),this.setAttribute(\"tabindex\",\"-1\"),this.addEventListener(\"keydown\",this.handleKeydown),this.addEventListener(\"mouseover\",this.handleMouseover),this.addEventListener(\"pointerdown\",this.handlePointerdown),this.addEventListener(\"pointerenter\",this.closeOverlaysForRoot),this.hasAttribute(\"id\")||(this.id=`sp-menu-item-${C()}`)}getActiveElementSafely(){let e=this.getRootNode(),t=e.activeElement;if(!t&&e!==document)for(;e&&e!==document&&\"host\"in e&&(e=e.host.getRootNode(),t=e.activeElement,!t););return t}handleMouseover(e){if(e.target===this){const i=this.getActiveElementSafely();(!i||!this.isInputElement(i))&&this.focus(),this.focused=!1}}isInputElement(e){return!!(this.isNativeInputElement(e)||e.contentEditable===\"true\"||this.isSpectrumInputComponent(e))}isNativeInputElement(e){return e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement}isSpectrumInputComponent(e){if(!e.tagName.startsWith(\"SP-\"))return!1;const t=e.getAttribute(\"role\");return!!(t&&[\"textbox\",\"searchbox\",\"combobox\",\"slider\"].includes(t)||v.test(e.tagName))}closeOverlaysForRoot(){var e;this.open||(e=this.menuData.parentMenu)==null||e.closeDescendentOverlays()}handleFocus(e){const{target:t}=e;t===this&&(this.focused=!0)}handleBlur(e){const{target:t}=e;t===this&&(this.focused=!1)}handleSubmenuClick(e){if(this._touchHandledViaPointerup){e.stopPropagation(),e.preventDefault();return}e.composedPath().includes(this.overlayElement)||this.openOverlay(!0)}handleSubmenuFocus(){requestAnimationFrame(()=>{this.overlayElement.open=this.open,this.focused=!1})}handlePointerenter(e){if(e.pointerType!==\"touch\"){if(this.leaveTimeout){clearTimeout(this.leaveTimeout),delete this.leaveTimeout,this.recentlyLeftChild=!1;return}this.focus(),this.openOverlay()}}handlePointerleave(e){e.pointerType!==\"touch\"&&(this._closedViaPointer=!0,this.open&&!this.recentlyLeftChild&&(this.leaveTimeout=setTimeout(()=>{delete this.leaveTimeout,this.open=!1},M)))}handleSubmenuChange(e){var t;e.stopPropagation(),(t=this.menuData.selectionRoot)==null||t.selectOrToggleItem(this)}handleSubmenuPointerenter(){this.recentlyLeftChild=!0}async handleSubmenuPointerleave(){this.recentlyLeftChild=!1}handleSubmenuOpen(e){var i;const t=e.composedPath().find(o=>o!==this.overlayElement&&o.localName===\"sp-overlay\");this._openedViaKeyboard&&((i=this.submenuElement)==null||i.focus()),this.overlayElement.parentOverlayToForceClose=t}cleanup(){this._closedViaPointer=!1,this.setAttribute(\"aria-expanded\",\"false\"),this.open=!1,this.active=!1}async openOverlay(e=!1){!this.hasSubmenu||this.open||this.disabled||(this.open=!0,this.active=!0,this.setAttribute(\"aria-expanded\",\"true\"),this._openedViaKeyboard=e,this.addEventListener(\"sp-closed\",this.cleanup,{once:!0}))}updateAriaSelected(){const e=this.getAttribute(\"role\");e===\"option\"?this.setAttribute(\"aria-selected\",this.selected?\"true\":\"false\"):(e===\"menuitemcheckbox\"||e===\"menuitemradio\")&&this.setAttribute(\"aria-checked\",this.selected?\"true\":\"false\")}setRole(e){this.setAttribute(\"role\",e),this.updateAriaSelected()}willUpdate(e){super.updated(e),e.has(\"open\")&&!this.open&&this.hasSubmenu&&!this._closedViaPointer&&this.matches(\":focus-within\")&&this.focus()}updated(e){var t,i;if(super.updated(e),e.has(\"label\")&&(this.label||typeof e.get(\"label\")!=\"undefined\")&&this.setAttribute(\"aria-label\",this.label||\"\"),e.has(\"active\")&&(this.active||typeof e.get(\"active\")!=\"undefined\")&&this.active&&((t=this.menuData.selectionRoot)==null||t.closeDescendentOverlays()),this.anchorElement&&(this.anchorElement.addEventListener(\"focus\",this.proxyFocus),this.anchorElement.tabIndex=-1),e.has(\"selected\")&&this.updateAriaSelected(),e.has(\"hasSubmenu\")&&(this.hasSubmenu||typeof e.get(\"hasSubmenu\")!=\"undefined\"))if(this.hasSubmenu){this.abortControllerSubmenu=new AbortController;const o={signal:this.abortControllerSubmenu.signal};this.addEventListener(\"click\",this.handleSubmenuClick,o),this.addEventListener(\"pointerenter\",this.handlePointerenter,o),this.addEventListener(\"pointerleave\",this.handlePointerleave,o),this.addEventListener(\"sp-opened\",this.handleSubmenuOpen,o)}else(i=this.abortControllerSubmenu)==null||i.abort()}connectedCallback(){super.connectedCallback(),this.triggerUpdate()}disconnectedCallback(){var e;this.menuData.cleanupSteps.forEach(t=>t(this)),this.menuData={focusRoot:void 0,parentMenu:void 0,selectionRoot:void 0,cleanupSteps:[]},(e=this._touchAbortController)==null||e.abort(),this._activePointerId=void 0,this._touchHandledViaPointerup=!1,super.disconnectedCallback()}async triggerUpdate(){this.willDispatchUpdate||(this.willDispatchUpdate=!0,await new Promise(e=>requestAnimationFrame(e)),this.dispatchUpdate())}focus(){super.focus(),this.dispatchEvent(new FocusEvent(\"focus\"))}blur(){this.dispatchEvent(new FocusEvent(\"blur\")),super.blur()}dispatchUpdate(){this.isConnected&&(this.dispatchEvent(new MenuItemAddedOrUpdatedEvent(this)),this.willDispatchUpdate=!1)}}r([s({type:Boolean,reflect:!0})],MenuItem.prototype,\"active\",2),r([s({type:Boolean,reflect:!0})],MenuItem.prototype,\"focused\",2),r([s({type:Boolean,reflect:!0})],MenuItem.prototype,\"selected\",2),r([s({type:String})],MenuItem.prototype,\"value\",1),r([s({type:Boolean,reflect:!0,attribute:\"has-submenu\"})],MenuItem.prototype,\"hasSubmenu\",2),r([u(\"slot:not([name])\")],MenuItem.prototype,\"contentSlot\",2),r([u('slot[name=\"icon\"]')],MenuItem.prototype,\"iconSlot\",2),r([s({type:Boolean,reflect:!0,attribute:\"no-wrap\",hasChanged(){return!1}})],MenuItem.prototype,\"noWrap\",2),r([u(\".anchor\")],MenuItem.prototype,\"anchorElement\",2),r([u(\"sp-overlay\")],MenuItem.prototype,\"overlayElement\",2),r([s({type:Boolean,reflect:!0})],MenuItem.prototype,\"open\",2);\n//# sourceMappingURL=MenuItem.js.map\n","\"use strict\";import{defineElement as e}from\"@spectrum-web-components/base/src/define-element.js\";import{MenuItem as m}from\"./src/MenuItem.js\";e(\"sp-menu-item\",m);\n//# sourceMappingURL=sp-menu-item.js.map\n"],"names":["INPUT_COMPONENT_PATTERN","RegExp","join","t","e","v","Object","defineProperty","b","getOwnPropertyDescriptor","d","p","c","s","n","i","length","Menu","g","f","noDefaultSize","constructor","super","this","touchStartY","touchStartTime","isCurrentlyScrolling","scrollThreshold","scrollTimeThreshold","label","ignore","value","valueSeparator","_selected","selectedItems","childItemSet","Set","focusedItemIndex","focusInItemIndex","shouldSupportDragAndSelect","selectedItemsMap","Map","pointerUpTarget","descendentOverlays","handleSubmenuClosed","stopPropagation","composedPath","dispatchEvent","Event","bubbles","composed","handleSubmenuOpened","find","has","_hasUpdatedSelectedItemIndex","_willUpdateItems","cacheUpdated","Promise","resolve","resolveCacheUpdated","rovingTabindexController","controlsRovingTabindex","E","direction","focusInIndex","findIndex","disabled","selected","elements","childItems","isFocusableElement","bind","hostDelegatesFocus","stopKeyEventPropagation","addEventListener","onSelectableItemAddedOrUpdated","onFocusableItemAddedOrUpdated","capture","handleClick","handlePointerup","handleFocusout","handleKeydown","handleTouchStart","passive","handleTouchMove","styles","y","isSubmenu","slot","isScrolling","selects","clear","forEach","menuData","selectionRoot","includes","push","set","requestUpdate","focusInItem","focusInElement","cachedChildItems","updateCachedMenuItems","menuSlot","assignedElements","flatten","entries","o","localName","querySelectorAll","splice","clearElementCache","childRole","resolvedRole","resolvedSelects","ownRole","menuCascade","hadFocusRoot","item","focusRoot","ancestorWithSelects","currentAncestorWithSelects","get","parentMenu","addChildItem","l","getAttribute","cleanupSteps","removeChildItem","setRole","add","handleItemsChanged","focused","hasAttribute","active","_updateFocus","getNeighboringFocusableElement","delete","focusOnFirstSelectedItem","preventScroll","scrollIntoView","block","focusOnItem","focus","every","some","touches","clientY","Date","now","Math","abs","handleTouchEnd","setTimeout","matches","reset","target","handlePointerBasedSelection","MouseEvent","button","Element","defaultPrevented","indexOf","href","preventDefault","hasSubmenu","open","selectOrToggleItem","prepareToCleanUp","handleDescendentOverlayOpened","overlayElement","handleDescendentOverlayClosed","min","max","r","slice","a","m","h","cancelable","keys","navigateBetweenRelatedMenus","key","root","dir","openOverlay","updateSelectedItemIndex","shiftKey","removeAttribute","document","removeEventListener","focusElement","click","closeDescendentOverlays","requestAnimationFrame","once","unshift","updateCache","hasUpdated","all","updateComplete","updateItemFocus","setAttribute","handleSlotchange","triggerUpdate","renderMenuItemSlot","I","render","firstUpdated","children","childItemsUpdated","updated","selectsChanged","connectedCallback","then","disconnectedCallback","getUpdateComplete","shadowRootOptions","delegatesFocus","u","type","String","reflect","prototype","Boolean","attribute","S","MenuItemAddedOrUpdatedEvent","WeakMap","_item","MenuItemKeydownEvent","KeyboardEvent","event","_event","altKey","code","ctrlKey","isComposing","location","metaKey","repeat","MenuItem","P","T","dependencyManager","_value","noWrap","_openedViaKeyboard","_closedViaPointer","_touchHandledViaPointerup","handleSlottableRequest","submenuElement","name","data","proxyFocus","handleTouchSubmenuToggle","pointerId","_activePointerId","_touchAbortController","abort","handleTouchCleanup","handleBeforetoggle","newState","manuallyKeepOpen","recentlyLeftChild","willDispatchUpdate","handleClickCapture","handleFocus","handleBlur","config","characterData","childList","subtree","attributeFilter","callback","breakItemChildrenCache","_","itemText","itemChildren","content","reduce","textContent","trim","hasIcon","slotContentIsPresent","iconSlot","contentSlot","icon","_itemChildren","map","cloneNode","classList","toggle","assignedNodes","stopImmediatePropagation","shouldProxyClick","anchorElement","renderSubmenu","manageSubmenu","handleEvent","import","loaded","handleSubmenuChange","handleSubmenuPointerenter","handleSubmenuPointerleave","renderAnchor","id","ariaHidden","className","handlePointerdown","pointerType","AbortController","window","signal","handleSubmenuFocus","handleMouseover","closeOverlaysForRoot","C","getActiveElementSafely","getRootNode","activeElement","host","isInputElement","isNativeInputElement","contentEditable","isSpectrumInputComponent","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","tagName","startsWith","test","handleSubmenuClick","handlePointerenter","leaveTimeout","clearTimeout","handlePointerleave","handleSubmenuOpen","parentOverlayToForceClose","cleanup","updateAriaSelected","willUpdate","tabIndex","abortControllerSubmenu","dispatchUpdate","FocusEvent","blur","isConnected","hasChanged"],"mappings":"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"}