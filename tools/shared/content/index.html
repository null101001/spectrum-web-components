<html><head></head><body><sp-tab-panel class="section" value="overview"> <div class="headerContainer spectrum-Typography"><h2 id="description" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeL">Description</h2> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeL" href="#description"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Description</span></sp-link><sp-divider size="l"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Shared mixins, tools, etc. that support developing Spectrum Web Components.</p> <div class="headerContainer spectrum-Typography"><h3 id="usage" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Usage</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#usage"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Usage</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="https://www.npmjs.com/package/@spectrum-web-components/shared"><img src="https://img.shields.io/npm/v/@spectrum-web-components/shared?style=for-the-badge" alt="See it on NPM!"></sp-link> <sp-link href="https://bundlephobia.com/result?p=@spectrum-web-components/shared"><img src="https://img.shields.io/bundlephobia/minzip/@spectrum-web-components/shared?style=for-the-badge" alt="How big is this package in your project?"></sp-link></p> <code-example class="language-bash" preprocessed="preprocessed"><pre class="language-bash" slot="code"><span class="token function">npm</span> <span class="token function">install</span> @spectrum-web-components/shared</pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">Individual base classes and mixins can be imported as follows:</p> <code-example class="language-javascript" preprocessed="preprocessed"><pre class="language-javascript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span>
    Focusable<span class="token punctuation">,</span>
    FocusVisiblePolyfillMixin<span class="token punctuation">,</span>
    getActiveElement<span class="token punctuation">,</span>
    LikeAnchor<span class="token punctuation">,</span>
    ObserveSlotText<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/shared'</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h3 id="getdeepelementfrompoint" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">getDeepElementFromPoint</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#getdeepelementfrompoint"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled getDeepElementFromPoint</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">The <code class="spectrum-Code">getDeepElementFromPoint</code> method allows you to obtain the deepest possible element at a given coordinates on the current page. The method will step into any available <code class="spectrum-Code">shadowRoot</code>s until it reaches the first element with no <code class="spectrum-Code">shadowRoot</code> or no children available at the given coordinates.</p> <div class="headerContainer spectrum-Typography"><h3 id="focusable" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Focusable</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#focusable"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Focusable</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">The <code class="spectrum-Code">Focusable</code> subclass of <code class="spectrum-Code">LitElement</code> adds some helpers method and lifecycle coverage in order to support passing focus to a container element inside of a custom element. The Focusable base class handles tabindex setting into shadowed elements automatically and is based heavily on the <sp-link href="https://github.com/web-padawan/aybolit/blob/master/packages/core/src/mixins/delegate-focus-mixin.js">aybolit delegate-focus-mixin</sp-link>.</p> <code-example class="language-javascript" preprocessed="preprocessed"><pre class="language-javascript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> Focusable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/shared'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> html <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit-element'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">FocusableButton</span> <span class="token keyword">extends</span> <span class="token class-name">Focusable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> override <span class="token keyword">get</span> <span class="token function">styles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> CSSResultArray <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">super</span><span class="token punctuation">.</span>styles<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">focusElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLElement <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#button'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> TemplateResult <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;button
                id="button"
            &gt;
                Focus for this button is being managed by the focusable base class.
            &lt;/button&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h3 id="focusvisiblepolyfillmixin" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">FocusVisiblePolyfillMixin</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#focusvisiblepolyfillmixin"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled FocusVisiblePolyfillMixin</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Use this mixin if you would like to leverage <code class="spectrum-Code">:focus-visible</code> based selectors in your CSS. <sp-link href="https://www.npmjs.com/package/focus-visible">Learn more about the polyfill that powers this.</sp-link></p> <div class="headerContainer spectrum-Typography"><h3 id="getactiveelement" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">getActiveElement</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#getactiveelement"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled getActiveElement</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Use this helper to find an <code class="spectrum-Code">activeElement</code> in your component. <sp-link href="https://dev.to/open-wc/mind-the-document-activeelement-2o9a">Learn more about tracking active elements over shadow DOM boundaries.</sp-link></p> <div class="headerContainer spectrum-Typography"><h3 id="likeanchor" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">LikeAnchor</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#likeanchor"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled LikeAnchor</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Mix <code class="spectrum-Code">download</code>, <code class="spectrum-Code">label</code>, <code class="spectrum-Code">href</code>, and <code class="spectrum-Code">target</code> properties into your element to allow it to act more like an <code class="spectrum-Code">HTMLAnchorElement</code>.</p> <div class="headerContainer spectrum-Typography"><h3 id="observeslotpresence" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">ObserveSlotPresence</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#observeslotpresence"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled ObserveSlotPresence</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">When working with styles that are driven by the conditional presence of <code class="spectrum-Code">&lt;slot&gt;</code>s in a component's shadow DOM, you will need to track whether light DOM that is meant for that slot exists. Use the <code class="spectrum-Code">ObserveSlotPresence</code> mixin to target specific light DOM to observe the presence of and trigger <code class="spectrum-Code">this.requestUpdate()</code> calls when content fulfilling that selector comes in and out of availability.</p> <code-example class="language-javascript" preprocessed="preprocessed"><pre class="language-javascript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> ObserveSlotPresence <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/shared'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> LitElement<span class="token punctuation">,</span> html <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit-element'</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ObserveSlotPresenceElement</span> <span class="token keyword">extends</span> <span class="token class-name">ObserveSlotPresence</span><span class="token punctuation">(</span>LitElement<span class="token punctuation">,</span> <span class="token string">'[slot="conditional-slot"]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// translate the mixin properties into locally understandable language</span>
    <span class="token keyword">protected</span> <span class="token keyword">get</span> <span class="token function">hasConditionalSlotContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>slotContentIsPresent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">protected</span> override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> TemplateResult <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;button
                id="button"
            &gt;
                </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>hasConditionalSlotContent
                    <span class="token operator">?</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                        &lt;slot
                            name="conditional-slot"
                        &gt;&lt;/slot&gt;
                    </span><span class="token template-punctuation string">`</span></span>
                    <span class="token operator">:</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>
                <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
            &lt;/button&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">protected</span> <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>slotContentIsPresent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; true when &lt;observing-slot-presence-element&gt;&lt;div slot="conditional-slot"&gt;&lt;/div&gt;&lt;/observing-slot-presence-element&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'observing-slot-presence-element'</span><span class="token punctuation">,</span> ObserveSlotPresenceElement<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h3 id="observeslottext" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">ObserveSlotText</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#observeslottext"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled ObserveSlotText</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">When working with <code class="spectrum-Code">&lt;slot&gt;</code>s and their <code class="spectrum-Code">slotchange</code> event, you will have the opportunity to capture when the nodes and/or elements in your element are added or removed. However, if the <code class="spectrum-Code">textContent</code> of a text node changes, you will not receive the <code class="spectrum-Code">slotchange</code> event because the slot hasn't actually received new nodes and/or elements in the exchange. When working with a lit-html binding <code class="spectrum-Code">&lt;your-element&gt;${text}&lt;/your-element&gt;</code> that means you will not receive a <code class="spectrum-Code">slotchange</code> event when the value of <code class="spectrum-Code">text</code> goes from <code class="spectrum-Code">text = ''</code> to <code class="spectrum-Code">text = 'something'</code> or the other way. In these cases the <code class="spectrum-Code">ObserveSlotText</code> can be leverages to apply a mutation observe onto your element that tracks <code class="spectrum-Code">characterData</code> mutations so that you can resspond as desired.</p> <code-example class="language-javascript" preprocessed="preprocessed"><pre class="language-javascript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> ObserveSlotText <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/shared'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> LitElement<span class="token punctuation">,</span> html <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit-element'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ObserveSlotTextElement</span> <span class="token keyword">extends</span> <span class="token class-name">ObserveSlotText</span><span class="token punctuation">(</span>LitElement<span class="token punctuation">,</span> <span class="token string">'#observing-slot'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> override <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> TemplateResult <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;button
                id="button"
            &gt;
                &lt;slot
                    id="observing-slot"
                    @slotchange=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>manageObservedSlot<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                &gt;&lt;/slot&gt;
            &lt;/button&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">protected</span> <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>slotHasContent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; true when &lt;observing-slot-text-element&gt;Text&lt;/observing-slot-text-element&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'observing-slot-text-element'</span><span class="token punctuation">,</span> ObserveSlotTextElement<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> </sp-tab-panel></body></html>